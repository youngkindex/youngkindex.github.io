flexbe_cli.block.register(10,{require:["//api-maps.yandex.ru/2.1/?lang=ru_RU"],on_init:function(){this.$map=this.$block.find("[data-map]").eq(0),this.map_data=this.$map.data("map"),ymaps.ready($.proxy(function(){this.show_map()},this)),flexbe_cli.is_admin?this.$block.find(".overlay").remove():this.$block.find(".overlay").one("mousedown",function(e){$(e.currentTarget).remove()})},show_map:function(){void 0!==this.map&&this.map.destroy(),this.map=new ymaps.Map(this.$map.get(0),{center:this.map_data.center,zoom:this.map_data.zoom,controls:["zoomControl","fullscreenControl"],behaviors:["default","scrollZoom"],type:"yandex#map"});var e;this.map.behaviors.disable("scrollZoom"),$(this.$map).off("mouseenter.map_scroll").on("mouseenter.map_scroll",$.proxy(function(i){e=window.setTimeout($.proxy(function(){this.map.behaviors.enable("scrollZoom")},this),700)},this)),$(this.$map).off("mouseleave.map_scroll").on("mouseleave.map_scroll",$.proxy(function(i){e&&(window.clearTimeout(e),this.map.behaviors.disable("scrollZoom"))},this)),this.update_places(),flexbe_cli.run.is_mobile&&this.map.behaviors.disable("drag")},update_places:function(){this.map.geoObjects.removeAll(),void 0===this.map_data.marker&&(this.map_data.marker="/_app/block/10/mark_blue.png"),$.each(this.map_data.places,$.proxy(function(e,i){void 0===i.color&&(i.color="blue");var t=new ymaps.Placemark(i.coords,{balloonContentHeader:i.name||!1,balloonContent:i.address},{iconLayout:"default#image",iconImageHref:"/_app/block/10/mark_"+i.color+".png",iconImageSize:[50,50],iconImageOffset:[-25,-50]});this.map.geoObjects.add(t)},this))}}),flexbe_cli.block.register(100,{on_init:function(){this.fix_height()},on_msg:function(e){"on_change"==e&&this.fix_height()},fix_height:function(){var e=this;if(this.$block.find(".price").each(function(i,t){if($(t).text().length>=6)return e.$block.find(".plans").addClass("tiny"),!1}),!(window.innerWidth<=768)){var i=0;this.$block.find(".item").each(function(e,t){$(t).css("min-height","");var o=$(t).outerHeight();$(t).hasClass("active")&&(o-=30),i=o>=i?o:i}),this.$block.find(".item").not(".active").css("min-height",i+"px"),this.$block.find(".item.active").css("min-height",i+30+"px")}}}),flexbe_cli.block.register(101,{on_init:function(){this.fix_height()},on_msg:function(e){"on_change"==e&&this.fix_height()},fix_height:function(){var e=this;if(this.$block.find(".price").each(function(i,t){if($(t).text().length>=6)return e.$block.find(".plans").addClass("tiny"),!1}),!(window.innerWidth<=768)){var i=0;this.$block.find(".item").each(function(e,t){$(t).css("min-height","");var o=$(t).outerHeight();$(t).hasClass("active")&&(o-=30),i=o>=i?o:i}),this.$block.find(".item").css("min-height",i+"px"),this.$block.find(".count-3 .item.active").css("min-height",i+30+"px")}}}),flexbe_cli.block.register(106,{require:["/_s/lib/spaced/flexbeSlider/jquery.flexbeSlider.new.js"],on_init:function(){var e=this;this.row=1;var i=this.$block.find(".slider").addClass("noanimate"),t=this.$block.data("slide_count")||0;this.slider=i.lightSlider({item:this.row,slideMove:this.row,slideMargin:0,useCSS:!0,cssEasing:"cubic-bezier(0.76, 0.91, 0.35, 1)",speed:550,adaptiveHeight:!0,loop:!1,cycle:!0,pager:!0,gallery:!0,thumbItem:4,galleryMargin:15,thumbMargin:15,enableDrag:!0,controls:!0,prevHtml:'<div class="button"><svg width="16" height="40" viewBox="0 0 16 10"><path d="M16 6H3.6L6 8.57 4.666 10 0 5l4.666-5L6 1.428 3.6 4H16z" fill="currentColor" fill-rule="evenodd"/></svg></div>',nextHtml:'<div class="button"><svg width="16" height="40" viewBox="0 0 16 10"><path transform="rotate(180) translate(-16, -10)" d="M16 6H3.6L6 8.57 4.666 10 0 5l4.666-5L6 1.428 3.6 4H16z" fill="currentColor" fill-rule="evenodd"/></svg></div>',responsive:[{breakpoint:569,settings:{galleryMargin:3,thumbMargin:3,thumbItem:3}}],onAfterSlide:function(){var t=e.slider.getCurrentSlideCount()-1;e.$block.data("slide_count",t),i.removeClass("noanimate"),setTimeout(function(){e.slider.refresh()},100)},onSliderLoad:function(){e.slider.goToSlide(t),flexbe_cli.components.image.init(e.$block);var i=0,o=setInterval(function(){e.slider.refresh(),10==++i&&clearInterval(o)},1e3)}}),this.setHeight()},setHeight:function(){var e,i=this,t=function(){i.slider&&(clearTimeout(e),e=setTimeout(function(){var e=i.$block.find(".slider_wrap"),t=i.$block.find(".images_wrap").innerWidth()*(5/7);e.find("li.image img").css("max-height",t+"px"),i.slider.refresh()},100))};t(),$(window).off("resize."+this.id+" orientationchange."+this.id).on("resize."+this.id+" orientationchange."+this.id,function(){t()})},on_msg:function(e,i){var t=this;this.slider&&setTimeout(function(){var o=0;"items_add"==e?(o=Math.floor(+i.index/t.row),t.slider.goToSlide(o)):"items_remove"==e&&((o=Math.floor((+i.at-1)/t.row))<0&&(o=0),t.slider.goToSlide(o))},150)}}),flexbe_cli.block.register(107,{require:["/_s/lib/spaced/flexbeSlider/jquery.flexbeSlider.new.js"],on_init:function(){var e=this;e.row=1;var i=e.$block.find(".slider").addClass("noanimate");if(i.length&&e.$block.find(".img_wrap").length>4){var t=e.$block.data("slide_count")||0;e.slider=i.lightSlider({item:e.row,slideMove:e.row,slideMargin:0,useCSS:!0,cssEasing:"cubic-bezier(0.76, 0.91, 0.35, 1)",speed:550,adaptiveHeight:!0,enableDrag:!1,loop:!1,cycle:!0,pager:!0,controls:!0,prevHtml:'<div class="button"><svg width="16" height="40" viewBox="0 0 16 10"><path d="M16 6H3.6L6 8.57 4.666 10 0 5l4.666-5L6 1.428 3.6 4H16z" fill="currentColor" fill-rule="evenodd"/></svg></div>',nextHtml:'<div class="button"><svg width="16" height="40" viewBox="0 0 16 10"><path transform="rotate(180) translate(-16, -10)" d="M16 6H3.6L6 8.57 4.666 10 0 5l4.666-5L6 1.428 3.6 4H16z" fill="currentColor" fill-rule="evenodd"/></svg></div>',onAfterSlide:function(){var t=e.slider.getCurrentSlideCount()-1;e.$block.data("slide_count",t),i.removeClass("noanimate"),setTimeout(function(){e.slider.refresh()},100)},onSliderLoad:function(){e.slider.goToSlide(t),flexbe_cli.components.image.init(e.$block),e.slider.refresh()}})}e.setHeight()},setHeight:function(){function e(){var e=t.$block.find(".images_wrap"),i=e.find(".img").eq(0).innerWidth()*(5/7);i<=20||(e.find(".img_wrap").css("height",i+"px"),t.slider&&t.slider.refresh())}var i,t=this;$(window).off("resize."+t.id+" orientationchange."+t.id).on("resize."+t.id+" orientationchange."+t.id,function(){clearTimeout(i),i=setTimeout(function(){e()},100)}),e()},on_msg:function(e,i){var t=this;if(t.slider){t.$block.find(".slider");setTimeout(function(){var o=0;"items_add"==e?(o=Math.floor(+i.index/t.row),t.slider.goToSlide(o)):"items_remove"==e?((o=Math.floor((+i.at-1)/t.row))<0&&(o=0),t.slider.goToSlide(o)):"reswiper"==e&&t.slider.refresh()},150)}}}),flexbe_cli.block.register(108,{require:["/_s/lib/spaced/flexbeSlider/jquery.flexbeSlider.new.js"],on_init:function(){var e=this;e.row=1;var i=e.$block.find(".slider").addClass("noanimate"),t=e.$block.data("slide_count")||0;e.slider=i.lightSlider({item:e.row,slideMove:e.row,slideMargin:0,useCSS:!0,cssEasing:"cubic-bezier(0.76, 0.91, 0.35, 1)",speed:550,adaptiveHeight:!0,loop:!1,cycle:!0,pager:!0,controls:!0,prevHtml:'<div class="button"><svg width="16" height="40" viewBox="0 0 16 10"><path d="M16 6H3.6L6 8.57 4.666 10 0 5l4.666-5L6 1.428 3.6 4H16z" fill="currentColor" fill-rule="evenodd"/></svg></div>',nextHtml:'<div class="button"><svg width="16" height="40" viewBox="0 0 16 10"><path transform="rotate(180) translate(-16, -10)" d="M16 6H3.6L6 8.57 4.666 10 0 5l4.666-5L6 1.428 3.6 4H16z" fill="currentColor" fill-rule="evenodd"/></svg></div>',onAfterSlide:function(){var t=e.slider.getCurrentSlideCount()-1;e.$block.data("slide_count",t),i.removeClass("noanimate"),setTimeout(function(){e.slider.refresh()},100)},onSliderLoad:function(){e.slider.goToSlide(t),flexbe_cli.components.image.init(e.$block),e.slider.refresh()}})},on_msg:function(e,i){var t=this;if(t.slider){t.$block.find(".slider");setTimeout(function(){var o=0;"items_add"==e?(o=Math.floor(+i.index/t.row),t.slider.goToSlide(o)):"items_remove"==e?((o=Math.floor((+i.at-1)/t.row))<0&&(o=0),t.slider.goToSlide(o)):"reswiper"==e&&t.slider.refresh()},150)}}}),flexbe_cli.block.register(109,{require:["/_s/lib/spaced/flexbeSlider/jquery.flexbeSlider.new.js"],on_init:function(){var e=this;e.row=1;var i=e.$block.find(".slider").addClass("noanimate"),t=e.$block.data("slide_count")||0;e.slider=i.lightSlider({item:e.row,slideMove:e.row,slideMargin:0,useCSS:!0,cssEasing:"cubic-bezier(0.76, 0.91, 0.35, 1)",speed:550,adaptiveHeight:!0,loop:!1,cycle:!0,pager:!1,controls:!0,prevHtml:"",nextHtml:"",onBeforeSlide:function(i,t){t+=1,e.$block.find(".counter .current").text(t)},onAfterSlide:function(){var t=e.slider.getCurrentSlideCount()-1;e.$block.data("slide_count",t),i.removeClass("noanimate"),setTimeout(function(){e.slider.refresh()},100)},onSliderLoad:function(){e.slider.goToSlide(t),flexbe_cli.components.image.init(e.$block),e.slider.refresh()}}),e.$block.find(".controls .button").off("click").on("click",function(i){var t=$(i.currentTarget).attr("data-action");e.$block.find(".slider_act ."+t).trigger("click")})},on_msg:function(e,i){var t=this;if(t.slider){t.$block.find(".slider");setTimeout(function(){var o=0;"items_add"==e?(o=Math.floor(+i.index/t.row),t.slider.goToSlide(o)):"items_remove"==e&&((o=Math.floor((+i.at-1)/t.row))<0&&(o=0),t.slider.goToSlide(o))},150)}}}),flexbe_cli.block.register(2,{on_init:function(){this.form=flexbe_cli.form.create({id:this.id,block:this.$block,form:"div.form"})}}),flexbe_cli.block.register(29,{on_init:function(){this.form=flexbe_cli.form.create({id:this.id,block:this.$block,form:"div.form"})}}),flexbe_cli.block.register(30,{on_init:function(){this.form=flexbe_cli.form.create({id:this.id,block:this.$block,form:".form"})}}),flexbe_cli.block.register(31,{on_init:function(){this.form=flexbe_cli.form.create({id:this.id,block:this.$block,form:".form"})}}),flexbe_cli.block.register(41,{on_init:function(){this.timer=flexbe_cli.timer.create({id:this.id,block:this.$block,item:"div.timer"})}}),flexbe_cli.block.register(42,{on_init:function(){this.timer=flexbe_cli.timer.create({id:this.id,block:this.$block,item:"div.timer"})}}),flexbe_cli.block.register(43,{on_init:function(){this.timer=flexbe_cli.timer.create({id:this.id,block:this.$block,item:".timer"}),this.form=flexbe_cli.form.create({id:this.id,block:this.$block,form:".form"})}}),flexbe_cli.block.register(44,{on_init:function(){this.timer=flexbe_cli.timer.create({id:this.id,block:this.$block,item:".timer"}),this.form=flexbe_cli.form.create({id:this.id,block:this.$block,form:".form"})}}),flexbe_cli.block.register(45,{on_init:function(){flexbe_cli.run.is_desktop&&this.$block.on("mouseover mouseout",".item",$.proxy(function(e){var i=$(e.currentTarget),t=i.find(".overlay"),o=90;this.$block.find(".item_list").hasClass("hide_desc")&&(o=65),"mouseover"==e.type?(i.addClass("hover"),t.css("height",o+parseInt(t.find(".img_text").outerHeight())+"px")):(i.removeClass("hover"),t.attr("style",""))},this))},on_msg:function(e){var i=this.$block.find(".item.hover");if(i.length>0){var t=90;this.$block.find(".item_list").hasClass("hide_desc")&&(t=65);var o=i.find(".overlay");o.css("height",t+parseInt(o.find(".img_text").outerHeight())+"px")}}}),flexbe_cli.block.register(48,{require:["/_s/lib/spaced/flexbeSlider/jquery.flexbeSlider.new.js"],on_load:function(){var e=this;e.row=3;var i=e.$block.find(".slider").addClass("noanimate"),t=e.$block.data("slide_count")||0,o=!flexbe_cli.is_admin&&+i.attr("data-slideshow");1==o&&(o=5),e.slider=i.lightSlider({item:e.row,slideMove:e.row,slideMargin:0,useCSS:!0,cssEasing:"cubic-bezier(0.76, 0.91, 0.35, 1)",speed:550,adaptiveHeight:!0,loop:!1,cycle:!0,auto:o?1:0,pause:1e3*o,pauseOnHover:!0,enableDrag:!1,prevHtml:'<div class="button"></div>',nextHtml:'<div class="button"></div>',responsive:[{breakpoint:960,settings:{item:2,slideMove:2}},{breakpoint:767,settings:{item:1,slideMove:1}}],onAfterSlide:function(){var t=e.slider.getCurrentSlideCount()-1;e.$block.data("slide_count",t),i.removeClass("noanimate"),setTimeout(function(){e.slider.refresh()},100)},onSliderLoad:function(){e.slider.goToSlide(t),flexbe_cli.components.image.init(e.$block)}}),e.$block.find(".item").hover(function(e){$(e.currentTarget).find(".img").addClass("editor_hover")},function(e){$(e.currentTarget).find(".img").removeClass("editor_hover")})},on_msg:function(e,i){var t=this;if(t.slider){t.$block.find(".slider");setTimeout(function(){var o=0;"items_add"==e?(o=Math.floor(+i.index/t.row),t.slider.goToSlide(o)):"items_remove"==e?((o=Math.floor((+i.at-1)/t.row))<0&&(o=0),t.slider.goToSlide(o)):"reswiper"==e&&t.slider.refresh()},150)}}}),flexbe_cli.block.register(49,{on_init:function(){this.size_render()},size_render:function(){function e(){if($(window).width()<767)return i.css({position:"relative",height:""}),i.find(".item").removeAttr("style"),!1;i.css("position","relative");var e,o,n,s,l,r,a=0,c=[];l=parseInt(t.cols||3),e=i.find(t.item),o=i.outerWidth(),n=parseInt(t.margin||0),s=parseInt(o/l)-n,r=1==l?-n/2:o%(s+n)/2;for(var d=0;d<l;d++)c.push(-n/2);e.each(function(e,i){var t=$(i),o=$.inArray(Math.min.apply(Math,c),c);t.css({width:s,position:"absolute",margin:n/2,top:c[o]+n/2,left:(s+n)*o+r}),c[o]+=t.outerHeight()+n,a<c[o]&&(a=c[o])}),i.css("height",a+parseInt(n/2))}var i=this.$block.find(".item_list"),t={item:".item",cols:3,margin:10,resizable:!0};if(e(),function(e){var t=i.find(".preview_img > img"),o=t.length;0===o&&e(),t.each(function(i,t){var n=new Image;n.onload=function(i){0==--o&&e()},n.onerror=function(i){0==--o&&e()},n.src=$(t).attr("src")})}(function(){setTimeout(e,200)}),t.resizable){var o=$(window).on("resize",function(){e()});i.on("remove",o.unbind)}var n=0,s=setInterval(function(){e(),++n>=50&&clearInterval(s)},1e3)}}),flexbe_cli.block.register(63,{require:["/_s/lib/spaced/flexbeMenu/jquery.flexbeMenu.js"],on_init:function(){void 0===this.$block.menu&&(this.$block.menu=new flexbe_cli.menu),this.$block.menu.init({menu:".menu",scrollSpeed:400},this.$block),this.$block.find(".mobile-menu-button a").flexbeMenu({})}}),flexbe_cli.block.register(64,{require:["/_s/lib/spaced/flexbeMenu/jquery.flexbeMenu.js"],on_init:function(){void 0===this.$block.menu&&(this.$block.menu=new flexbe_cli.menu),this.$block.menu.init({menu:".menu",scrollSpeed:400,topOffset:120},this.$block),this.$block.find(".mobile-menu-button a").flexbeMenu({})}}),flexbe_cli.block.register(65,{require:["/_s/lib/spaced/flexbeMenu/jquery.flexbeMenu.js"],on_init:function(){void 0===this.$block.menu&&(this.$block.menu=new flexbe_cli.menu),this.$block.menu.init({menu:".menu",scrollSpeed:400,topOffset:1},this.$block),this.$block.find(".mobile-menu-button a").flexbeMenu({})}}),flexbe_cli.block.register(66,{require:["/_s/lib/spaced/flexbeMenu/jquery.flexbeMenu.js"],on_init:function(){void 0===this.$block.menu&&(this.$block.menu=new flexbe_cli.menu),this.$block.menu.init({menu:".menu",scrollSpeed:400},this.$block),this.$block.find(".mobile-menu-button a").flexbeMenu({})}}),flexbe_cli.block.register(67,{require:["/_s/lib/spaced/flexbeMenu/jquery.flexbeMenu.js"],on_init:function(){var e=this.$block.is($('div[data-b-id="67"]').eq(0));void 0===this.$block.menu&&(this.$block.menu=new flexbe_cli.menu),this.$block.menu.init({menu:".menu",scrollSpeed:400},this.$block),e&&this.$block.addClass("mobile"),this.$block.find(".mobile-menu-button a").flexbeMenu({hideOnOut:!1})}}),flexbe_cli.block.register(68,{require:["/_s/lib/spaced/flexbeMenu/jquery.flexbeMenu.js"],on_init:function(){void 0===this.$block.menu&&(this.$block.menu=new flexbe_cli.menu),this.$block.menu.init({menu:".menu",scrollSpeed:400},this.$block),this.$block.find(".mobile-menu-button a").flexbeMenu({})},on_msg:function(e){}}),flexbe_cli.block.register(69,{on_init:function(){flexbe_cli.run.is_mobile&&this.$block.find(".parallax").removeClass("parallax")}}),flexbe_cli.block.register(70,{require:["/_s/lib/spaced/flexbeSlider/jquery.flexbeSlider.new.js"],on_init:function(){var e=this;if(e.$block.find(".item_list").hasClass("slidered")){var i=e.$block.find(".slider").addClass("noanimate");e.row=2;var t=e.$block.data("slide_count")||0;e.slider=i.lightSlider({item:e.row,slideMove:e.row,slideMargin:50,useCss:!0,cssEasing:"cubic-bezier(0.76, 0.91, 0.35, 1)",speed:550,adaptiveHeight:!0,loop:!1,auto:!1,pauseOnHover:!0,enableDrag:!1,enableTouch:!0,pager:!0,controls:!0,responsive:[{breakpoint:960,settings:{slideMargin:25}},{breakpoint:768,settings:{item:1,slideMove:1,slideMargin:0}}],onAfterSlide:function(){var t=e.slider.getCurrentSlideCount()-1;e.$block.data("slide_count",parseInt(t)),i.removeClass("noanimate"),setTimeout(function(){e.slider.refresh()},100)},onSliderLoad:function(){e.slider.goToSlide(t),flexbe_cli.components.image.init(e.$block)}}),e.controlKeys()}e.fixHeight()},controlKeys:function(){var e=this.$block.find(".slider_act");this.$block.find(".prev, .next").click(function(i){var t=$(i.currentTarget).attr("data-action");"prev"!=t&&"next"!=t||e.find("a.slider_"+t).trigger("click")})},fixHeight:function(){var e={};this.$block.find(".item").each(function(){e[this.offsetTop]=e[this.offsetTop]||[],e[this.offsetTop].push(this)});for(var i in e){var t=e[i],o=0;if($(".item_data",t).css("min-height",0),!(t.length<=1)){for(var n=0;n<t.length;n++){var s=$(".item_data",t[n]).outerHeight();o=o<s?s:o}$(".item_data",t).css("min-height",o)}}this.slider&&this.slider.refresh()},on_msg:function(e,i){var t=this;if(t.slider){t.$block.find(".slider");setTimeout(function(){var o=0;"items_add"==e?(o=Math.floor(+i.at/t.row),t.slider.goToSlide(o)):"items_remove"==e&&(o=Math.floor((+i.at-1)/t.row),t.slider.goToSlide(o)),t.fixHeight()},150)}}}),flexbe_cli.block.register(71,{require:["/_s/lib/spaced/flexbeSlider/jquery.flexbeSlider.new.js"],on_init:function(){var e=this,i=e.$block.find(".slider").addClass("noanimate");if(!(i.find("li").length<=1)){var t=e.$block.data("slide_count")||0,o=!flexbe_cli.is_admin&&+i.attr("data-slideshow");1==o&&(o=5),e.slider=i.lightSlider({item:1,slideMargin:0,useCSS:!0,cssEasing:"cubic-bezier(0.76, 0.91, 0.35, 1)",speed:550,adaptiveHeight:!0,loop:!1,cycle:!0,auto:o?1:0,pause:1e3*o,pauseOnHover:!0,enableDrag:!1,prevHtml:'<div class="button"></div>',nextHtml:'<div class="button"></div>',onAfterSlide:function(){e.$block.data("slide_count",e.slider.getCurrentSlideCount()-1),i.removeClass("noanimate"),setTimeout(function(){e.slider.refresh()},100)},onSliderLoad:function(){e.slider.goToSlide(t),flexbe_cli.components.image.init(e.$block)}})}},on_msg:function(e,i){var t=this;if(t.slider){t.$block.find(".slider");setTimeout(function(){if("items_add"==e)t.slider.goToSlide(+i.index);else if("items_remove"==e){var o=+i.at-1;o<0&&(o=0),t.slider.goToSlide(o)}},150)}}}),flexbe_cli.block.register(72,{require:["/_s/lib/spaced/flexbeSlider/jquery.flexbeSlider.new.js"],on_load:function(){var e=this,i=e.$block.find(".slider").addClass("noanimate"),t=e.$block.data("slide_count")||0,o=!flexbe_cli.is_admin&&+i.attr("data-slideshow");1==o&&(o=5),e.slider=i.lightSlider({item:1,slideMargin:0,useCSS:!0,cssEasing:"cubic-bezier(0.76, 0.91, 0.35, 1)",speed:550,adaptiveHeight:!0,loop:!1,cycle:!0,auto:o?1:0,pause:1e3*o,pauseOnHover:!0,enableDrag:!1,prevHtml:'<div class="button"></div>',nextHtml:'<div class="button"></div>',onAfterSlide:function(){e.$block.data("slide_count",e.slider.getCurrentSlideCount()-1),i.removeClass("noanimate"),setTimeout(function(){e.slider.refresh()},100)},onSliderLoad:function(){e.slider.goToSlide(t),flexbe_cli.components.image.init(e.$block)}})},on_msg:function(e,i){var t=this;if(t.slider){t.$block.find(".slider");setTimeout(function(){if("items_add"==e)t.slider.goToSlide(i.index);else if("items_remove"==e){var o=+i.at-1;o<0&&(o=0),t.slider.goToSlide(o)}},150)}}}),flexbe_cli.block.register(73,{require:["/_s/lib/spaced/flexbeMenu/jquery.flexbeMenu.js"],on_init:function(){void 0===this.$block.menu&&(this.$block.menu=new flexbe_cli.menu),this.$block.menu.init({menu:".menu",scrollSpeed:400},this.$block),this.$block.find(".mobile-menu-button a").flexbeMenu({})}}),flexbe_cli.block.register(74,{on_init:function(){this.form=flexbe_cli.form.create({id:this.id,block:this.$block,form:".form"})}}),flexbe_cli.block.register(75,{require:["/_s/lib/spaced/flexbeSlider/jquery.flexbeSlider.new.js","/_s/lib/spaced/flexbeSlider/jquery.flexbeSlider.css"],on_init:function(){var e=this;e.row=1;if(e.$block.find(".item_list").hasClass("slidered")&!flexbe_cli.is_admin){var i=e.$block.find(".slider");e.slider=i.lightSlider({item:e.row,slideMargin:0,useCSS:!0,cssEasing:"ease-in-out",speed:1e3,adaptiveHeight:!0,mode:"fade",loop:!0,enableDrag:!1,pager:!0,controls:!1,onBeforeSlide:function(){var i=e.slider.getCurrentSlideCount();e.$block.data("slide_count",i);var t=e.$block.find(".slider_pager");i%2?t.removeClass("odd"):t.addClass("odd")},onSliderLoad:function(){}}),i.data("slider",e.slider),e.slideShow(),e.fixHeight()}},slideShow:function(){var e=this,i={},t=e.$block.find(".slider"),o=t.parents(".item_list"),n=1e3*t.attr("data-timeout")||5e3;i.init=function(){var t=[$(document).scrollTop(),$(document).scrollTop()+$(window).height()],n=[o.offset().top,o.offset().top+o.height()];e.inRange(n,t)?(i.startSlideshow(),i.onHover()):i.stopSlideshow()},i.startSlideshow=function(){t.data("playTimeout")||t.data("playTimeout",setInterval(function(){e.slider.goToNextSlide()},n))},i.stopSlideshow=function(){clearInterval(t.data("playTimeout")),t.data("playTimeout","")},i.onHover=function(){t.off("hover"),t.hover(function(){i.stopSlideshow()},function(){i.startSlideshow()})},$(document).on("scroll",function(){i.init()}),i.init()},inRange:function(e,i){for(var t=e[0];t<=e[1];t++)if(t>=i[0]&&t<=i[1])return!0;return!1},fixHeight:function(){var e=[],i=0;this.$block.find(".item").each(function(){e.push(this)}),$(".item_data",e).css("height",0);for(var t=0;t<e.length;t++){var o=$(".item_data",e[t]).outerHeight();i=i<o?o:i}$(".item_data",e).css("height",i)}}),flexbe_cli.block.register(76,{require:["/_s/lib/spaced/flexbeSlider/jquery.flexbeSlider.new.js","/_s/lib/spaced/flexbeSlider/jquery.flexbeSlider.css"],on_init:function(){var e=this;e.row=1;var i=e.$block.data("slide_count")||0,t=e.$block.find(".slider").addClass("noanimate");e.slider=t.lightSlider({item:e.row,slideMargin:0,useCSS:!0,cssEasing:"cubic-bezier(.76,.07,.56,.56)",speed:500,adaptiveHeight:!0,mode:"slide",loop:!1,cycle:!0,enableDrag:!1,pager:!0,controls:!0,onSliderLoad:function(){e.slider.goToSlide(i),flexbe_cli.components.image.init(e.$block),e.setPager(),e.slider.refresh()},onBeforeSlide:function(){e.setPager()},onAfterSlide:function(){var i=+e.slider.getCurrentSlideCount()-1;e.$block.data("slide_count",i),t.removeClass("noanimate")}}),e.controlKeys(),e.pagerClick()},controlKeys:function(){var e=this.$block.find(".slider_act");this.$block.find(".prev, .next").click(function(i){var t=$(i.currentTarget).attr("data-action");"prev"!=t&&"next"!=t||e.find("a.slider_"+t).trigger("click")})},setPager:function(){this.$block.find(".slider");var e=this.slider.getCurrentSlideCount();this.$block.find(".slider-pager .page-item").removeClass("active"),this.$block.find(".slider-pager .page-item[data-item-id="+e+"]").addClass("active")},pagerClick:function(){var e=this;e.$block.find(".page-item").on("click",function(){var i=+$(this).data("itemId")-1;e.slider.goToSlide(i)})},on_msg:function(e,i){var t=this;if(t.slider){t.$block.find(".slider");setTimeout(function(){"items_add"==e?t.slider.goToSlide(i.at):"items_remove"==e&&t.slider.goToSlide(i.at-1)},150)}}}),flexbe_cli.block.register(77,{require:["/_s/lib/spaced/flexbeSlider/jquery.flexbeSlider.new.js","/_s/lib/spaced/flexbeSlider/jquery.flexbeSlider.css"],on_load:function(){var e=this;e.row=1;var i=e.$block.data("slide_count")||0,t=e.$block.find(".slider").addClass("noanimate");e.slider=t.lightSlider({item:e.row,slideMargin:0,useCSS:!0,cssEasing:"cubic-bezier(.76,.07,.56,.56)",speed:500,adaptiveHeight:!0,mode:"slide",loop:!1,cycle:!0,enableDrag:!1,pager:!0,controls:!0,onSliderLoad:function(){e.slider.goToSlide(i),flexbe_cli.components.image.init(e.$block),e.setPager(),e.slider.refresh()},onBeforeSlide:function(){e.setPager()},onAfterSlide:function(){var i=+e.slider.getCurrentSlideCount()-1;e.$block.data("slide_count",i),t.removeClass("noanimate")}}),e.controlKeys(),e.pagerClick()},controlKeys:function(){var e=this.$block.find(".slider_act");this.$block.find(".prev, .next").click(function(i){var t=$(i.currentTarget).attr("data-action");"prev"!=t&&"next"!=t||e.find("a.slider_"+t).trigger("click")})},setPager:function(){this.$block.find(".slider");var e=this.slider.getCurrentSlideCount();this.$block.find(".slider-pager .page-item").removeClass("active"),this.$block.find(".slider-pager .page-item[data-item-id="+e+"]").addClass("active")},pagerClick:function(){var e=this;e.$block.find(".page-item").on("click",function(){var i=+$(this).data("itemId")-1;e.slider.goToSlide(i)})},on_msg:function(e,i){var t=this;if(t.slider){t.$block.find(".slider");setTimeout(function(){"items_add"==e?t.slider.goToSlide(i.at):"items_remove"==e&&t.slider.goToSlide(i.at-1)},150)}}}),flexbe_cli.block.register(78,{require:["/_s/lib/spaced/flexbeSlider/jquery.flexbeSlider.new.js","/_s/lib/spaced/flexbeSlider/jquery.flexbeSlider.css"],on_init:function(){var e=this;e.row=1;var i=e.$block.data("slide_count")||0,t=e.$block.find(".slider").addClass("noanimate");e.slider=t.lightSlider({item:e.row,slideMargin:0,useCSS:!0,cssEasing:"cubic-bezier(.76,.07,.56,.56)",speed:500,adaptiveHeight:!0,mode:"slide",loop:!1,cycle:!0,enableDrag:!1,pager:!0,controls:!0,onSliderLoad:function(){e.slider.goToSlide(i),flexbe_cli.components.image.init(e.$block),e.slider.refresh()},onAfterSlide:function(){var i=+e.slider.getCurrentSlideCount()-1;e.$block.data("slide_count",i),t.removeClass("noanimate")}}),e.controlKeys()},controlKeys:function(){var e=this.$block.find(".slider_act");this.$block.find(".prev, .next").click(function(i){var t=$(i.currentTarget).attr("data-action");"prev"!=t&&"next"!=t||e.find("a.slider_"+t).trigger("click")})},on_msg:function(e,i){var t=this;if(t.slider){t.$block.find(".slider");setTimeout(function(){"items_add"==e?t.slider.goToSlide(i.at):"items_remove"==e&&t.slider.goToSlide(i.at-1)},150)}}}),flexbe_cli.block.register(79,{require:["/_s/lib/spaced/flexbeSlider/jquery.flexbeSlider.new.js","/_s/lib/spaced/flexbeSlider/jquery.flexbeSlider.css"],on_init:function(){var e=this;e.row=1;var i=e.$block.data("slide_count")||0,t=e.$block.find(".slider").addClass("noanimate");e.slider=t.lightSlider({item:e.row,slideMargin:0,useCSS:!0,cssEasing:"cubic-bezier(.76,.07,.56,.56)",speed:500,adaptiveHeight:!0,mode:"slide",loop:!1,cycle:!0,enableDrag:!1,pager:!1,controls:!0,onSliderLoad:function(){e.slider.goToSlide(i),flexbe_cli.components.image.init(e.$block),e.slider.refresh()},onAfterSlide:function(){var i=+e.slider.getCurrentSlideCount()-1;e.$block.data("slide_count",i),t.removeClass("noanimate")}}),e.controlKeys()},controlKeys:function(){var e=this.$block.find(".slider_act");this.$block.find(".prev, .next").click(function(i){var t=$(i.currentTarget).attr("data-action");"prev"!=t&&"next"!=t||e.find("a.slider_"+t).trigger("click")})},on_msg:function(e,i){var t=this;if(t.slider){t.$block.find(".slider");setTimeout(function(){"items_add"==e?t.slider.goToSlide(i.at):"items_remove"==e&&t.slider.goToSlide(i.at-1)},150)}}}),flexbe_cli.block.register(80,{require:["/_s/lib/spaced/flexbeMenu/jquery.flexbeMenu.js"],on_init:function(){void 0===this.$block.menu&&(this.$block.menu=new flexbe_cli.menu),this.$block.menu.init({menu:".menu",scrollSpeed:400},this.$block),this.$block.find(".mobile-menu-button a").flexbeMenu({})}}),flexbe_cli.block.register(81,{require:["/_s/lib/spaced/flexbeMenu/jquery.flexbeMenu.js"],on_init:function(){void 0===this.$block.menu&&(this.$block.menu=new flexbe_cli.menu),this.$block.menu.init({menu:".menu",scrollSpeed:400},this.$block),this.$block.find(".mobile-menu-button a").flexbeMenu({})}}),flexbe_cli.block.register(82,{require:["/_s/lib/spaced/flexbeMenu/jquery.flexbeMenu.js"],on_init:function(){void 0===this.$block.menu&&(this.$block.menu=new flexbe_cli.menu),this.$block.menu.init({menu:".menu",scrollSpeed:400},this.$block),this.$block.find(".mobile-menu-button a").flexbeMenu({})}}),flexbe_cli.block.register(83,{require:["/_s/lib/spaced/flexbeMenu/jquery.flexbeMenu.js"],on_init:function(){void 0===this.$block.menu&&(this.$block.menu=new flexbe_cli.menu),this.$block.menu.init({menu:".menu",scrollSpeed:400},this.$block),this.$block.find(".mobile-menu-button a").flexbeMenu({})}}),flexbe_cli.block.register(84,{require:["/_s/lib/spaced/flexbeMenu/jquery.flexbeMenu.js"],on_init:function(){void 0===this.$block.menu&&(this.$block.menu=new flexbe_cli.menu),this.$block.menu.init({menu:".menu",scrollSpeed:400},this.$block),this.$block.find(".mobile-menu-button a").flexbeMenu({})}}),flexbe_cli.block.register(9,{require:["/_s/lib/spaced/flexbeSlider/jquery.flexbeSlider.new.js"],on_init:function(){var e=this;if(e.$block.find(".item_list").hasClass("slidered")){var i=e.$block.find(".slider").addClass("noanimate");e.row=3;var t=e.$block.data("slide_count")||0;e.slider=i.lightSlider({item:e.row,slideMove:e.row,slideMargin:0,useCss:!0,cssEasing:"cubic-bezier(0.76, 0.91, 0.35, 1)",speed:550,adaptiveHeight:!0,loop:!1,auto:!1,pause:4e3,pauseOnHover:!0,enableDrag:!1,enableTouch:!0,pager:!0,controls:!0,responsive:[{breakpoint:960,settings:{item:2,slideMove:2}},{breakpoint:768,settings:{item:1,slideMove:1}}],onAfterSlide:function(){var t=e.slider.getCurrentSlideCount()-1;e.$block.data("slide_count",t),i.removeClass("noanimate"),setTimeout(function(){e.slider.refresh()},100)},onSliderLoad:function(){e.slider.goToSlide(t),flexbe_cli.components.image.init(e.$block)}}),e.controlKeys()}},controlKeys:function(){var e=this.$block.find(".slider_act");this.$block.find(".prev, .next").click(function(i){var t=$(i.currentTarget).attr("data-action");"prev"!=t&&"next"!=t||e.find("a.slider_"+t).trigger("click")})},on_msg:function(e,i){var t=this;t.slider&&setTimeout(function(){var o=0;"items_add"==e?(o=Math.floor(+i.at/t.row),t.slider.goToSlide(o)):"items_remove"==e&&(o=Math.floor((+i.at-1)/t.row),t.slider.goToSlide(o))},150)}}),flexbe_cli.block.register(93,{on_init:function(){}}),flexbe_cli.block.register(94,{on_init:function(){this.form=flexbe_cli.form.create({id:this.id,block:this.$block,form:".form"})}}),flexbe_cli.block.register(95,{on_init:function(){this.form=flexbe_cli.form.create({id:this.id,block:this.$block,form:".form"})}}),flexbe_cli.block.register(96,{on_init:function(){this.form=flexbe_cli.form.create({id:this.id,block:this.$block,form:".form"})}}),flexbe_cli.block.register(99,{on_init:function(){this.fix_height()},on_msg:function(e,i){"on_change"==e&&this.fix_height()},fix_height:function(){if(!(window.innerWidth<=768)){var e=0;this.$block.find(".item").each(function(i,t){$(t).css("min-height","");var o=$(t).outerHeight();$(t).hasClass("active")&&(o-=30),e=o>=e?o:e}),this.$block.find(".item").not(".active").css("min-height",e+"px"),this.$block.find(".item.active").css("min-height",e+30+"px")}}}),flexbe_cli.modal.register(1,{on_init:function(){this.form=flexbe_cli.form.create({id:this.id,block:this.$modal,form:".form"})},on_open:function(e){var i=this;e&&e.fields&&this.form.add_fields(e.fields),e&&e.items&&this.form.add_items(e.items),this.form_position(),$(window).off("resize.modal").on("resize.modal",function(){i.form_position()})},on_close:function(){$(window).off("resize.modal")},form_position:function(){var e=this.$modal.find(".modal-data"),i=e.find(".form"),t=e.outerHeight()-i.outerHeight();t>10&&window.innerWidth<=768?i.css({top:t/2}):i.css({top:0})}}),flexbe_cli.modal.register(100,{types:{},pay_id:"",hash:"",selectors:{},on_init:function(){var e=this;this.start(),flexbe_cli.events.on("pay",function(i,t){t&&"init"==t.action&&e.start()})},start:function(){this.loadSelectors();var e=this.getQueryParams();if(e){switch(e){case"success":this.showSuccessAlert();break;case"fail":this.showFailAlert();break;case"pay":this.getBill()}setTimeout(function(){flexbe_cli.modal.open("pay")},300)}},loadSelectors:function(){this.selectors.$title=this.$modal.find(".modal-title"),this.selectors.$container=this.$modal.find(".container"),this.selectors.$bill=this.$modal.find(".action-bill"),this.selectors.$cash=this.$modal.find(".action-cash"),this.selectors.$already=this.$modal.find(".action-already"),this.selectors.$success=this.$modal.find(".action-success"),this.selectors.$fail=this.$modal.find(".action-fail")},getQueryParams:function(){var e=!1;try{e=JSON.parse('{"'+decodeURI(location.search.substring(1)).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}catch(e){}if(!e.pay_id)return!1;if(this.pay_id=e.pay_id,this.hash=e.h,e.pay_status){try{history.pushState(null,null,window.location.pathname)}catch(e){}return e.pay_status}return"pay"},getBill:function(){var e=this;this.pay_id&&!1!==this.pay_id&&$.ajax({url:"/mod/pay/ajax",type:"GET",dataType:"json",data:{act:"payData",pay_id:this.pay_id,hash:this.hash}}).done(function(i){if(0===i.status)return!1;e.types=i.pay.support_types,2==i.pay.pay_status?e.showAlreadyPayed(i.pay):e.cashonly()?e.showCashInstruction(i.pay):e.showBillForm(i.pay)})},showBillForm:function(e){var i=this;this.selectors.$container.attr("data-type","bill");var t=this.selectors.$bill.find(".pay-methods-list").empty(),o=this.selectors.$bill.find(".overview"),n=this.selectors.$bill.find(".pay-action");for(var s in this.types){var l=this.types[s];if(l.name){var r='<label class="item" data-type="'.concat(s,'" title="').concat(l.name,'">\n                                <div class="preview"><i></i></div>\n                                <div class="value"><input type="radio" name="form[pay_method]" value="').concat(s,'"></div>\n                                <span>').concat(l.name,"</span>\n                            </label>");t.append(r)}}this.selectors.$title.text("Оплата счета №"+e.pay_id),o.find(".price > span").text(e.pay_sum),n.find(".btn-wrap a").on("click",function(e){var o=t.find("input:checked").val();if(!o)return alert("Выберите способ оплаты"),!1;if("cash"==o)return i.showCashInstruction(),!1;var n="/mod/pay/?pay_type=".concat(o,"&pay_id=").concat(i.pay_id,"&h=").concat(i.hash);$(e.currentTarget).attr("href",n),$(e.currentTarget).addClass("busy")})},showCashInstruction:function(){this.selectors.$container.attr("data-type","cash"),this.selectors.$title.text(""),this.types.cash&&this.types.cash.instruction&&this.selectors.$cash.find(".text").html(this.types.cash.instruction),$.ajax({url:"/mod/pay/ajax",type:"GET",dataType:"json",data:{act:"selectCash",pay_id:this.pay_id,hash:this.hash}})},showAlreadyPayed:function(e){this.selectors.$container.attr("data-type","already");var i=this.selectors.$already.find(".pay-action"),t="";"0"!=e.pay_time_done&&(t=e.pay_time_done),this.selectors.$title.text("Оплата счета №"+e.pay_id),i.find(".status .date").text(t),i.find(".pay-summ").text(e.pay_sum),i.find(".pay-method").text(e.pay_method_name)},showSuccessAlert:function(){this.selectors.$title.text(""),this.selectors.$container.attr("data-type","success"),flexbe_cli.stat.reach_goal("pay_done")},showFailAlert:function(){var e=this;this.selectors.$title.text(""),this.selectors.$container.attr("data-type","fail"),this.selectors.$fail.find("a").off("click").on("click",function(){e.getBill()})},cashonly:function(){return!(!this.types.cash||1!=Object.keys(this.types).length)}}),flexbe_cli.modal.register(2,{on_init:function(){this.form=flexbe_cli.form.create({id:this.id,block:this.$modal,form:".form"})},on_open:function(e){var i=this;e&&e.fields&&this.form.add_fields(e.fields),e&&e.items&&this.form.add_items(e.items),this.form_position(),$(window).off("resize.modal").on("resize.modal",function(){i.form_position()})},on_close:function(){$(window).off("resize.modal")},form_position:function(){var e=this.$modal.find(".modal-data"),i=e.find(".form"),t=e.outerHeight()-i.outerHeight();t>10&&window.innerWidth<=768?i.css({top:t/2}):i.css({top:0})}}),flexbe_cli.modal.register(3,{on_init:function(){this.form=flexbe_cli.form.create({id:this.id,block:this.$modal,form:".form"})},on_open:function(e){var i=this;e&&e.fields&&this.form.add_fields(e.fields),e&&e.items&&this.form.add_items(e.items),this.form_position(),$(window).off("resize.modal").on("resize.modal",function(){i.form_position()})},on_close:function(){$(window).off("resize.modal")},form_position:function(){var e=this.$modal.find(".modal-data"),i=e.find(".form"),t=e.outerHeight()-i.outerHeight();t>10&&window.innerWidth<=768?i.css({top:t/2}):i.css({top:0})}}),flexbe_cli.widget.register(1,{list:[],$list:null,$sum:null,$button:null,is_open:!1,is_expend:!1,on_init:function(){this.$container=this.$widget.find(".widget-container"),this.$list=this.$widget.find(".order-list > ul"),this.$sum=this.$widget.find(".checkout .price"),this.$button=this.$widget.find(".cart-button"),this.events(),flexbe_cli.is_admin?this.list=[{id:"7832324_1",count:1,img:"/img/1000000945_200/img.jpg",title:"Тестовый товар 1",price:750},{id:"7832464_2",count:2,img:"/img/1000000948_200/img.jpg",title:"Тестовый товар 2",price:2550}]:(this.loadFromStorage(),this.form_init()),this.renderList()},on_update:function(){this.on_init(),this.is_open&&(this.$container.addClass("fade-in noanimate"),this.open(),this.expend&&this.$container.addClass("state-1 state-2"))},form_init:function(){var e=this;this.form=flexbe_cli.form.create({id:this.id,block:this.$widget,form:".component-form",before_send:function(){e.form&&e.form.add_items(e.list)},after_send:function(){flexbe_cli.stat.ecommerce.purchase(e.list),e.list=[],e.renderList(),e.close()}})},events:function(){var e=this;flexbe_cli.events.off("cart_command.w1").on("cart_command.w1",function(i,t){if(t)switch(t.command){case"toggle":e.is_open?e.close():e.open();break;case"open":e.open();break;case"close":e.close();break;case"add":e.add(t.item);break;case"remove":e.remove(t.id)}}),this.$widget.off("click.cart-button").on("click.cart-button",".cart-button",function(){e.$container.hasClass("show")?e.close():e.open()}),this.$list.off("click").on("click","[data-action]",function(i){var t=$(i.currentTarget).closest("li"),o=$(i.currentTarget).data("action"),n=t.data("id");n&&("remove"==o?e.remove(n):e.updateCount(n,o))}),this.$list.off("input").on("input",".count",function(i){var t=$(i.currentTarget).closest("li").attr("data-id"),o=+i.target.value;o||(o=1,$(i.currentTarget).val(1)),e.updateCount(t,o)}),this.$container.find(".cart-container .button").off("click").on("click",function(){e.animateForm()}),this.$container.off("click.times-close").on("click.times-close","a.close, > .overlay",function(){e.close()}),$(document).off("keyup.cart_esc_close").on("keyup.cart_esc_close",function(i){27==i.which&&e.close()})},open:function(){var e=this;this.is_open=!0,flexbe_cli.is_admin?(this.$container.addClass("is-editor"),$(".container-list").addClass("editor_stop")):this.loadFromStorage(),this.renderList(),flexbe_cli.is_admin&&this.$container.addClass("is-editor"),$("body").addClass("overflow"),$(".container-list").addClass("editor_stop"),this.$container.addClass("show"),setTimeout(function(){e.$container.addClass("fade-in"),e.$list[0].offsetHeight>flexbe_cli.resize.height&&e.$container.find(".container").css("height","auto")},50),setTimeout(function(){e.$container.removeClass("noanimate")},300)},close:function(){var e=this;$(window).off("keyup.cart_esc_close"),this.is_open&&(this.is_open=!1,this.expend=!1,this.$container.hasClass("state-2")?this.$container.addClass("fade-out"):this.$container.removeClass("fade-in"),setTimeout(function(){e.$container.removeClass("show fade-in fade-out noanimate state-1 state-2"),e.$widget.find(".container, .form-container, .cart-container, .form-holder, .button").removeAttr("style"),$("body").removeClass("overflow"),$(".container-list").removeClass("editor_stop"),$(".mobile-menu .menu-burger").addClass("animate show")},300))},animateForm:function(e){var i=this,t=this.$container.find(".container"),o=t.find(".form-container"),n=t.find(".cart-container");if(this.expend=!0,flexbe_cli.run.is_screen_tablet_s||flexbe_cli.run.is_screen_mobile)this.$container.addClass("state-1"),t.height(Math.max(o.outerHeight(),n.outerHeight())),setTimeout(function(){i.$container.addClass("state-2"),i.$container.scrollTop(0)},e?50:0);else{t.addClass("recalculate");var s=t[0].offsetHeight+"px";t.removeClass("recalculate"),this.$container.addClass("state-1"),setTimeout(function(){t.css("height",s),i.$container.addClass("state-2"),i.$container.scrollTop(0)},e?10:0)}},add:function(e){var i=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((!this.is_open||t)&&e){e.count=parseInt(e.count,10)||1,e.price=parseFloat(e.price)||0;var o=!1;this.list&&this.list.length&&(this.list=this.list.map(function(i){return i.id==e.id&&(i.count+=e.count,o=!0),i})),o||this.list.push(e),flexbe_cli.stat.ecommerce.add(e.id,e.title,e.count,e.price),flexbe_cli.stat.reach_goal("add_to_cart",e),this.renderList(),1===this.list.length&&1===this.list[0].count&&setTimeout(function(){i.open()},200),this.$button.removeClass("blink"),setTimeout(function(){i.$button.addClass("blink")},50)}},remove:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!1!==e){var i=this.list.filter(function(i){return i.id==e})[0];flexbe_cli.stat.ecommerce.remove(i.id,i.title),this.list=this.list.filter(function(i){return i.id!=e}),this.renderList()}},updateCount:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"+";!1!==i&&(this.list&&this.list.length&&(this.list=this.list.map(function(o){if(o.id==i){"+"==t?o.count+=1:"-"==t&&o.count>1?o.count-=1:(t=parseInt(t,10),o.count=t||1),o.count=Math.floor(o.count)||1;var n=e.$list.find('[data-id="'.concat(i,'"]'));n.find(".price").text(e.formatPrice(o.count*o.price)),"-"!==t&&"+"!==t||n.find(".count").val(o.count),flexbe_cli.stat.ecommerce.add(o.id,o.title,o.count,o.price)}return o})),this.saveToStorage(),this.renderCount())},renderList:function(){var e=this;this.saveToStorage(),this.renderCount();var i="";this.list.length&&this.list.forEach(function(t){i+=function(i){return'<li data-id="'.concat(i.id,'">\n            <div class="img-holder">\n                <div class="img" ').concat(i.img&&'style="background-image: url('+i.img+')"','></div>\n            </div>\n            <div class="item-holder">\n                <div class="top">\n                    <div class="item-title">').concat(i.title,'</div>\n                    <button data-action="remove"><svg viewBox="0 0 13 16"><path d="M12 5v10a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V5a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h3V.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5V2h3a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1zM2 5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5V5H2v.5zM8 1H5v1h3V1zm3.5 2h-10a.5.5 0 0 0 0 1h10a.5.5 0 0 0 0-1z" fill-rule="evenodd"/></svg></button>\n                </div>\n                <div class="bottom">\n                    <div class="item-count">\n                        <button data-action="-"><svg viewBox="0 0 10 1"><path d="M.357 0h9.286a.357.357 0 0 1 0 .715H.357a.357.357 0 0 1 0-.715z" fill-rule="evenodd"/></svg></button>\n                        <input type="number" class="count" min="1" value="').concat(i.count,'"/>\n                        <button data-action="+"><svg viewBox="0 0 10 10"><path d="M5.357 5.357v4.286a.357.357 0 0 1-.714 0V5.357H.357a.357.357 0 0 1 0-.714h4.286V.357a.357.357 0 0 1 .714 0v4.286h4.286a.357.357 0 0 1 0 .715H5.357z" fill-rule="evenodd"/></svg></button>\n                    </div>\n\n                    <div class="item-price">\n                        <span class="price">').concat(e.formatPrice(i.price*i.count),'</span>\n                        <span class="curr">').concat(flexbe_cli.lang.currency,"</span>\n                    </div>\n                </div>\n            </div>\n        </li>")}(t)}),this.$list.html(i),this.$container.find(".cart-container").toggleClass("empty",0===this.list.length),this.form&&this.form.add_items(this.list)},renderCount:function(){var e=0,i=0;this.list.length&&this.list.forEach(function(t){t.count&&(e+=parseInt(t.count,10),t.price&&(i+=parseInt(t.count,10)*parseFloat(t.price)))}),this.$sum.text(this.formatPrice(i)),this.$button.attr("data-count",e)},formatPrice:function(e){return e=String(e).replace(",",".").replace(/[^0-9.]/g,""),e=e.split("."),e[0]=chunkSplit(e[0]),e[1]&&(e[1]=e[1].length<2?e[1]+="0":e[1].substr(0,2)),e.length>2&&(e=e.splice(0,2)),e.join(".")},loadFromStorage:function(){if(!flexbe_cli.is_admin&&localStorage)try{var e=JSON.parse(localStorage.getItem("f_cart"));e&&e instanceof Array&&(this.list=e)}catch(e){}},saveToStorage:function(){if(!flexbe_cli.is_admin&&localStorage)if(this.list&&this.list instanceof Array)try{localStorage.setItem("f_cart",JSON.stringify(this.list))}catch(e){}else this.list=[]}});