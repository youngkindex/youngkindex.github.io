function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}!function(e){for(var t=0,i=["ms","moz","webkit","o"],n=0;n<i.length&&!e.requestAnimationFrame;++n)e.requestAnimationFrame=e["".concat(i[n],"RequestAnimationFrame")],e.cancelAnimationFrame=e["".concat(i[n],"CancelAnimationFrame")]||e["".concat(i[n],"CancelRequestAnimationFrame")];e.requestAnimationFrame||(e.requestAnimationFrame=function(i,n){var o=(new Date).getTime(),a=Math.max(0,16-(o-t)),s=e.setTimeout(function(){i(o+a)},a);return t=o+a,s}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){clearTimeout(e)})}(window),function(e){e.svg4everybody=function(){function t(e,t){if(t){var i=document.createDocumentFragment(),n=t.getAttribute("viewBox");e.setAttribute("viewBox",n);for(var o=t.cloneNode(!0);o.childNodes.length;)i.appendChild(o.firstChild);e.appendChild(i)}}function i(e){e.onreadystatechange=function(){if(4===e.readyState){var i=e._cachedDocument;i||(i=e._cachedDocument=document.implementation.createHTMLDocument(""),i.body.innerHTML=e.responseText,e._cachedTarget={}),e._embeds.splice(0).map(function(n){var o=e._cachedTarget[n.id];o||(o=e._cachedTarget[n.id]=i.getElementById(n.id)),t(n.svg,o)})}},e.onreadystatechange()}return function(n){function o(){for(var e=0;e<c.length;){var n=c[e],d=n.parentNode;if(d&&/svg/i.test(d.nodeName)){var f=n.getAttribute("xlink:href");if(a&&(!s.validate||s.validate(f,d,n))){d.removeChild(n);var u=f.split("#"),h=u.shift(),m=u.join("#");if(h.length){var _=r[h];_||((_=r[h]=new XMLHttpRequest).open("GET",h),_.send(),_._embeds=[]),_._embeds.push({svg:d,id:m}),i(_)}else t(d,document.getElementById(m))}}else++e}l(o,67)}var a,s=Object(n);a="polyfill"in s?s.polyfill:/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/.test(navigator.userAgent)||/\bEdge\/(\d+)\.(\d+)\b/.test(navigator.userAgent)||(navigator.userAgent.match(/\bAppleWebKit\/(\d+)\b/)||[])[1]<537;var r={},l=e.requestAnimationFrame||setTimeout,c=document.getElementsByTagName("use");a&&o()}}()}(window),function(e){function t(e){e.preventDefault()}e.videoImgFallback=function(e){console.warn("video load error, gif fallback used");var t=e.querySelector("img");t&&e.parentNode.replaceChild(t,e)},e.getCookie=function(e){var t=document.cookie.match(new RegExp("(?:^|; )".concat(e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1"),"=([^;]*)")));return t?decodeURIComponent(t[1]):void 0},e.setCookie=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.expires;if("number"==typeof n&&n){var o=new Date;o.setTime(o.getTime()+1e3*n),n=i.expires=o}n&&n.toUTCString&&(i.expires=n.toUTCString()),t=encodeURIComponent(t);var a="".concat(e,"=").concat(t);for(var s in i){a+="; ".concat(s);var r=i[s];!0!==r&&(a+="=".concat(r))}document.cookie=a},e.deleteCookie=function(e){setCookie(e,"",{expires:-1})},e.getJsonFromUrl=function(e){var t;if(e){var i=location.href.indexOf("?");if(-1===i)return[];t=location.href.substr(i+1)}else t=location.search.substr(1);var n={};return t.split("&").forEach(function(e){if(e){var t=(e=e.split("+").join(" ")).indexOf("="),i=t>-1?e.substr(0,t):e,o=t>-1?decodeURIComponent(e.substr(t+1)):"",a=i.indexOf("[");if(-1===a)n[decodeURIComponent(i)]=o;else{var s=i.indexOf("]",a),r=decodeURIComponent(i.substring(a+1,s));i=decodeURIComponent(i.substring(0,a)),n[i]||(n[i]=[]),r?n[i][r]=o:n[i].push(o)}}}),n},e.chunkSplit=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";return(e+="").split("").reverse().join("").match(new RegExp(".{0,".concat(t,"}"),"g")).join(i).split("").reverse().join("").trim()},e.preventBodyScrolling=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];document.body[!0===e?"addEventListener":"removeEventListener"]("touchmove",t,!1)}}(window);var is_dev=!0;window.flexbe_cli=_extends({},window.flexbe_cli||{}),window.spaced_cli=window.flexbe_cli,flexbe_cli.animations=1,flexbe_cli.run={_init:function(){this.deviceInfo(),flexbe_cli.animations=!flexbe_cli.is_admin,this.$update_style=$('<style id="core_style"></style>'),$("head").append(this.$update_style),this.init(),svg4everybody({polyfill:!flexbe_cli.is_admin&&(flexbe_cli.run.is_ie||flexbe_cli.run.is_EDGE)})},init:function(){},deviceInfo:function(){var e=navigator.userAgent.toLowerCase();this.is_screen_mobile=window.innerWidth<570,this.is_screen_tablet_s=window.innerWidth>=570&&window.innerWidth<768,this.is_screen_tablet=window.innerWidth>=768&&window.innerWidth<=1024,this.is_screen_small_pc=window.innerWidth>1024&&window.innerWidth<1200,this.is_screen_pc=window.innerWidth>=1200,this.is_mobile=-1!==e.indexOf("mobile")||this.is_screen_mobile||this.is_screen_tablet_s,this.is_desktop=!this.is_mobile,this.is_touch="ontouchstart"in window,this.is_webkit=-1!==e.indexOf("webkit"),this.is_safari=-1!==e.indexOf("safari")&&e.match(/version\/(\d+)/),this.is_firefox=-1!==e.indexOf("firefox"),this.is_mobile_ie=-1!==e.indexOf("iemobile"),this.is_ie=-1!==e.indexOf("trident")||-1!==e.indexOf("msie"),this.is_EDGE=-1!==e.indexOf("edge"),this.is_OSX=!!e.match(/(iPad|iPhone|iPod|Macintosh)/gi)}},flexbe_cli.message=function(e){$.get("/mod/log",{msg:e})},window.onpopstate=function(){flexbe_cli.modal.popstate()},document.addEventListener("DOMContentLoaded",function(){function e(){if("undefined"!=typeof jQuery){flexbe_cli.events._init(),flexbe_cli.run._init();try{document.body.classList.add("ready")}catch(e){document.body.className+=" ready"}flexbe_cli.isInited=!0}else setTimeout(e,10)}e()}),document.addEventListener("load",function(){flexbe_cli.isLoaded=!0}),flexbe_cli.events={_init:function(){$.observable=function(e){var t={_JQInit:function(){this._JQ=$(this)},emit:function(e,t){return!this._JQ&&this._JQInit(),this._JQ.trigger(e,t),this},once:function(e,t){return!this._JQ&&this._JQInit(),this._JQ.one(e,t),this},on:function(e,t){return!this._JQ&&this._JQInit(),this._JQ.bind(e,t),this},off:function(e,t){return!this._JQ&&this._JQInit(),this._JQ.unbind(e,t),this}};return"object"!==_typeof(e)&&(e=this),Object.keys(t).forEach(function(i){e[i]=t[i].bind(e)}),t},$.observable(this),this._dispatchEvents()},_dispatchEvents:function(){var e=function(e,t){if(t&&t.event&&"core"===t.sender&&t.core&&t.core.$area){var i=t.core.is||e.type.replace(/_event$/,""),n="block"===i,o="modal"===i,a="inited"===t.event,s="updated"===t.event,r="opened"===t.event&&o,l="screen"===t.event&&n;(a||s)&&flexbe_cli.events.emit("entity_init",t),(l||r||s)&&flexbe_cli.events.emit("entity_screen",_extends(t,{state:t.state||r||s}))}};flexbe_cli.events.off("block_event.flexbe_events").on("block_event.flexbe_events",e),flexbe_cli.events.off("modal_event.flexbe_events").on("modal_event.flexbe_events",e),flexbe_cli.events.off("widget_event.flexbe_events").on("widget_event.flexbe_events",e),flexbe_cli.events.off("element_event.flexbe_events").on("element_event.flexbe_events",e)}},flexbe_cli.loaded={},flexbe_cli.require=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15e3,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e&&0!==e.length||t(!1),n)if(!0===flexbe_cli.loaded[e])t(!0);else if(Array.isArray(flexbe_cli.loaded[e]))flexbe_cli.loaded[e].push(t);else{var o,a=!1,s=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!a){a=!0,clearTimeout(o);var i=flexbe_cli.loaded[e];flexbe_cli.loaded[e]=t,i.forEach(function(e){"function"==typeof e&&e(t)})}};if(flexbe_cli.loaded[e]=[t],/\.css$/.test(e)){var r=document.createElement("link");r.onerror=s.bind(this,!1),r.onload=s.bind(this,!0),o=setTimeout(s.bind(this,"timeout"),i),r.rel="stylesheet",r.href=e,document.body.appendChild(r)}else{var l=document.createElement("script");l.onload=s.bind(this,!0),l.onerror=s.bind(this,!1),o=setTimeout(s.bind(this,"timeout"),i),l.async=!0,l.src=e,document.body.appendChild(l)}}else{var c=function(i){e.every(function(e){return"boolean"==typeof flexbe_cli.loaded[e]})&&t(i)};"string"==typeof e&&(e=[e]),Array.isArray(e)&&e.forEach(function(e){flexbe_cli.require(e,c,i,!0)})}},flexbe_cli.lib={init:function(){var e=this;$(window).one("load.flexbe_lib",function(){e.lg()})},lg:function(){var e=this;if(!flexbe_cli.is_admin&&99!=flexbe_cli.theme_id){var t=".img_popup, .img-popup:not(.swiper-slide-duplicate .img-popup)",i=$(".lg-init, .component-media").filter(function(){return!$(e).parents(".lg-init, .component-media")[0]});flexbe_cli.run.is_screen_pc&&i.hasClass("lg-prevent-pc")||flexbe_cli.run.is_mobile&&i.hasClass("lg-prevent-mobile")||i.find(t).length&&flexbe_cli.require(["/_s/lib/jquery/lightGallery/css/lightgallery.css","/_s/lib/jquery/lightGallery/js/lg-spaced-bundle.min.js"],function(){function e(){history.state&&history.state.lg&&history.replaceState(null,null,"#")}var n=!1;i.each(function(i,o){var a=$(o);a.lightGallery({selector:t,counter:!1,download:!1,slideEndAnimation:!1,getCaptionFromTitleOrAlt:!0,closable:!0,loop:"1"===a.find(".component-slider").attr("data-loop"),easing:"ease-out",hideBarsDelay:6e3,zoomIcons:!1,actualSize:!1,enableSlide:!$(o).attr("data-lg-single")}),a.on("onBeforeOpen.lg",function(){n=!0,e(),history.state&&history.state.lg||history.pushState({lg:!0},null,"#image")}),a.on("onBeforeClose.lg",function(){history.state&&history.state.lg&&(n=!1,history.back()),e()})}),e(),window.addEventListener("popstate",function(){!n||history.state&&history.state.lg||i.each(function(e,t){var i=$(t).data("lightGallery");i&&i.destroy()})})})}}},flexbe_cli.lang={basic:"en",current:window.lang&&window.lang.current||"ru",currency:window.lang&&window.lang.currency||"₽",ru:{menu:"Меню",form:{personal_data_text:'<p>Нажимая на кнопку, вы даете согласие на обработку <a href="%s" target="_blank">персональных данных</a></p>',required:"Поле должно быть заполнено",email:"Некорректный адрес электронной почты",digits:"Поле должно содержать только цифры",minlength:"Минимальная длина - 5 цифр",selectFiles:"Выберите файлы",remove:"Удалить"},quiz:{step:"Шаг",cancel:"Отмена",prev:"Назад",next:"Далее",from:"из",skip:"Пропустить шаг"},timer:{dd:"Дней",hh:"Часов",mm:"Минут",ss:"Секунд"},cart:{empty:"В корзине ничего нет"}},en:{form:{personal_data_text:"",required:"This field is required",email:"Please enter a valid email address",digits:"Please enter only digits",minlength:"Please enter at least 5 digits",selectFiles:"Select files",remove:"Remove"},quiz:{step:"Step",cancel:"Cancel",prev:"Back",next:"Next",from:"from",skip:"Skip"},timer:{dd:"Days",hh:"Hours",mm:"Minutes",ss:"Seconds"},menu:"Menu",cart:{empty:"Cart is empty"}},de:{form:{required:"Dieses Feld ist ein Pflichtfeld",email:"Geben Sie bitte eine gültige E-Mail Adresse ein",digits:"Geben Sie bitte nur Ziffern ein",minlength:"Geben Sie bitte mindestens 5 Ziffern ein",selectFiles:"Wählen Sie die Dateien",remove:"Löschen"},quiz:{step:"Schritt",cancel:"Abbrechen",prev:"Zurück",next:"Weiter",from:"aus",skip:"Überspringen"},timer:{dd:"Days",hh:"Stunden",mm:"Minutes",ss:"Sekunden"},menu:"Menü"},fr:{form:{required:"Ce champ est obligatoire",email:"Veuillez fournir une adresse électronique valide",digits:"Veuillez fournir seulement des chiffres",minlength:"Veuillez fournir au moins 5 chiffres",selectFiles:"Sélectionnez les fichiers",remove:"Effacer"},quiz:{step:"Étape",cancel:"Annuler",prev:"Retour",next:"Suivant",from:"de",skip:"sauter"},timer:{dd:"Jours",hh:"Heures",mm:"Minutes",ss:"Secondes"},menu:"Menu"},es:{form:{required:"Este campo es obligatorio",email:"Escribe una dirección de correo válida",digits:"Escribe sólo dígitos",minlength:"Por favor, no escribas menos de 5 dígitos",selectFiles:"Seleccione los archivos",remove:"Borrar"},timer:{dd:"Días",hh:"Horas",mm:"Minutos",ss:"Segundos"},menu:"Menú"},it:{form:{required:"Campo obbligatorio",email:"Inserisci un indirizzo email valido",digits:"Inserisci solo numeri",minlength:"Inserisci almeno 5 numeri",selectFiles:"Selezionare i file",remove:"Cancellare"},timer:{dd:"Giorni",hh:"Ore",mm:"Minuti",ss:"Secondi"},menu:"Menu"},pl:{form:{required:"To pole jest wymagane",email:"Proszę o podanie prawidłowego adresu email",digits:"Proszę o podanie samych cyfr",minlength:"Proszę o podanie przynajmniej 5 cyfr",selectFiles:"Wybierz pliki",remove:"Usunąć"},timer:{dd:"Dni",hh:"Godziny",mm:"Minuty",ss:"Sekundy"},menu:"Menu"},ge:{form:{required:"ეს ველი სავალდებულოა",email:"გთხოვთ შეიყვანოთ სწორი ფორმატით",digits:"დაშვებულია მხოლოდ ციფრები",minlength:"შეიყვანეთ მინიმუმ 5 ციფრი",selectFiles:"აირჩიეთ ფაილი",remove:"წაშლა"},timer:{dd:"დღეები",hh:"საათი","მმ":"ოქმი",ss:"წამი"},menu:"მენიუ"},ua:{form:{required:"Поле має бути заповнено",email:"Некоректна адреса електронної пошти",digits:"Поле повинно містити тільки цифри",minlength:"Мінімальна довжина - 5 цифр",selectFiles:"Виберіть файли",remove:"Видалити"},timer:{dd:"Дні",hh:"Години",mm:"Хвилини",ss:"Секунди"},menu:"Меню"},by:{form:{required:"Поле павінна быць запоўнена",email:"Некарэктны адрас электроннай пошты",digits:"Поле павінна ўтрымліваць толькі лічбы",minlength:"Мінімальны даўжыня - 5 лічбаў",selectFiles:"Выберыце файлы",remove:"Выдаліць"},timer:{dd:"Дні",hh:"Гадзіннік",mm:"Хвіліны",ss:"Секунды"},menu:"Меню"},kz:{form:{required:"Міндетті өріс",email:"Жарамсыз электрондық пошта мекенжайы",digits:"Далалық тек сандардан тұруы тиіс",minlength:"Ең аз ұзындығы - 5 сандар",selectFiles:"Файлдарды таңдаңыз",remove:"Жою"},timer:{dd:"Күндері",hh:"Сағаттар",mm:"Минут",cc:"Секунд"},menu:"Мәзір"},get:function(e,t){if(e){if(t&&this[t]||(t=this.current||this.basic),"currency"===e)return this.currency;var i=e.split("."),n=this[t];for(var o in i){if(!(n=n[i[o]])&&t!==this.basic)return this.get(e,this.basic)}return n}},init:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"body";$("[data-lang]",t).each(function(t,i){var n=$(i).attr("data-lang"),o=$(i).attr("data-lang-content"),a=String(e.get(n));$(i).html(a.replace(/%s/,o))})}},flexbe_cli.resize={old_h:window.innerHeight,width:window.innerWidth,height:window.innerHeight,docHeight:document.body.scrollHeight,init:function(){var e,t=this;$(window).on("resize orientationchange",function(){t.width=window.innerWidth,t.height=window.innerHeight,clearTimeout(e),e=setTimeout(function(){flexbe_cli.run.deviceInfo(),$(window).trigger("resized")},80)});!function e(){var i=document.body.scrollHeight;i!=t.documentHeight&&(t.documentHeight=i,$(window).trigger("documentresize")),setTimeout(e,150)}()}},flexbe_cli.scroll={latest:window.pageYOffset,init:function(){var e=this;$("body");this.latest=window.pageYOffset,$(window).on("scroll.coreScroll",function(t){e.latest=window.pageYOffset}),this.scrollImprovement.init()},scrollImprovement:{scrollTimer:0,pointerState:0,init:function(){this.stopScrollEvent(),this.stopAnimations(),this.pointerEvents()},stopScrollEvent:function(){var e=this,t=flexbe_cli.scroll.latest;$(window).on("scroll.scrollendEvent",function(){var i=t>flexbe_cli.scroll.latest?"up":"down";clearTimeout(e.scrollTimer),e.scrollTimer=setTimeout(function(){t=flexbe_cli.scroll.latest,$(window).trigger("scrollend",{direction:i})},200)})},stopAnimations:function(){var e=$("body, html");e.bind("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove",function(t){(t.which>0||"mousedown"==t.type||"mousewheel"==t.type||"touchmove"==t.type)&&e.stop()})},pointerEvents:function(){var e=this;flexbe_cli.is_admin||($(window).on("scroll.pointerEventsDisable",function(){0===e.pointerState&&($("body").addClass("disable-pointer-events"),e.pointerState=1)}),$(window).on("scrollend.pointerEventsDisable",function(){1===e.pointerState&&(e.pointerState=0,$("body").removeClass("disable-pointer-events"))}))}},smoothScroll:function(){var e=this;if(!flexbe_cli.run.is_OSX){var t,i,n,o=$("html, body"),a=flexbe_cli.resize.height/4,s=0,r=0;$(window).on("mousewheel DOMMouseScroll",function(l){var c="mousewheel"==l.type?l.originalEvent.wheelDelta/120:"DOMMouseScroll"==l.type?-l.originalEvent.detail/3:0,d=c*a;c*a!=0&&(l.preventDefault(),function(a){clearTimeout(i),clearTimeout(t),s+=a,n=300,r||(r=1,o.stop().animate({scrollTop:e.latest-s},n)),i=setTimeout(function(){r=0},16),t=setTimeout(function(){o.finish(),s=0,r=0},n)}(d))})}}},flexbe_cli.block={data:{},proto:{is:"block",require:[],_on_init:function(){var e=this;flexbe_cli.block.fixCoverHeight(this.$block),flexbe_cli.require(this.require,function(){e.on_load(),e._tween(),e.on_init(),e.isInit=!0,flexbe_cli.events.emit("block_event",{event:"inited",sender:"core",core:e}),e._tween()})},_on_update:function(e){var t=this;flexbe_cli.block.fixCoverHeight(this.$block),flexbe_cli.require(this.require,function(){t.on_load(),t.on_update(e),t._tween(!0),flexbe_cli.events.emit("block_event",{event:"updated",sender:"core",core:t})})},_on_focus:function(e){this.on_focus(e),flexbe_cli.events.emit("block_event",{event:"focus",sender:"core",core:this,state:e})},_on_screen:function(e){this.on_screen(e),flexbe_cli.events.emit("block_event",{event:"screen",sender:"core",core:this,state:e})},_on_view:function(e){this.on_view(e),flexbe_cli.events.emit("block_event",{event:"view",sender:"core",core:this,state:e})},_tween:function(e){function t(){var e=flexbe_cli.resize.height-n;if(e<0&&(e=0),i.tween.fix=e,i.tween.position=1/i.tween.height*(window.pageYOffset-i.tween.start),i.tween.positionCenter=function(){var e=window.pageYOffset+flexbe_cli.resize.height/2,t=i.tween.start+i.tween.height/2;return(e-t+i.tween.height/2)/i.tween.height}(),!i.isInit)return!1;var t=i.tween.positionCenter;t>0&&t<1?i.tween.focus||(i.tween.focus=!0,i._on_focus(!0)):i.tween.focus&&(i.tween.focus=!1,i._on_focus(!1));window.pageYOffset+flexbe_cli.resize.height>i.tween.start&&window.pageYOffset<i.tween.end?i.tween.onscreen||(i.tween.onscreen=!0,i._on_screen(!0)):i.tween.onscreen&&(i.tween.onscreen=!1,i._on_screen(!1));(function(){var e=flexbe_cli.resize.height>=i.tween.height?i.tween.height/4:flexbe_cli.resize.height/3;return window.pageYOffset+flexbe_cli.resize.height>i.tween.start+e&&window.pageYOffset<i.tween.end-e})()?i.tween.view||(i.tween.view=!0,i._on_view(!0)):i.tween.view&&(i.tween.view=!1,i._on_view(!1))}var i=this,n=this.$block.outerHeight(),o=this.$block.outerWidth(),a=this.$block.offset().top;0===this.$block.index()&&n<10&&a<10&&(n=this.$block.next().outerHeight()),this.tween||(this.tween={}),this.tween.width=o,this.tween.height=n,this.tween.start=a,this.tween.end=a+n,(e||void 0===this.tween.focus)&&(this.tween.focus=!1),(e||void 0===this.tween.view)&&(this.tween.view=!1),(e||void 0===this.tween.onscreen)&&(this.tween.onscreen=!1);var s=this.$block.find(".container")[0];this.tween.color=s&&getComputedStyle(s).color||"#fff",t(),$(window).off("scroll.tween_".concat(this.id)).on("scroll.tween_".concat(this.id),t)},_on_msg:function(e,t){this.on_msg(e,t)},on_load:function(){},on_init:function(){},on_update:function(){this.on_init()},on_focus:function(){},on_screen:function(){},on_view:function(){},on_msg:function(){}},init:function(){var e=this;this.$list=$(".container-list, header, footer"),$("[data-b-id]",this.$list).each(function(t,i){e.bind($(i))}),flexbe_cli.events.on("block_add.flexbe_block",function(t,i){if(i&&i.id){var n=$('.b_block[data-id="'.concat(i.id,'"]'));e.bind(n)}}),flexbe_cli.events.on("block_render.flexbe_block",function(e,t){if(t&&t.id&&~t.render.indexOf("template")){var i=$('.b_block[data-id="'.concat(t.id,'"]')).data("_core");void 0!==i&&"function"==typeof i._on_update&&i._on_update(t)}}),flexbe_cli.events.on("client_msg.flexbe_block",function(e,t){if(t&&t.id&&"block"===t.is){var i=$('.b_block[data-id="'.concat(t.id,'"]')).data("_core");void 0!==i&&i._on_msg(t.msg,t.data)}}),$(window).on("resize orientationchange documentresize",$.debounce(this.updateTweens,80,this));var t;flexbe_cli.events.off("editor_change.flexbe_block").on("editor_change.flexbe_block",function(i,n){n&&n.reason&&"update_list"===n.reason&&/^block/.test(n.name)&&(clearTimeout(t),t=setTimeout(function(){e.updateTweens()},250))}),$(window).on("load.flexbe_block",function(){if(/^#/.test(location.hash)){var t=String(location.hash).replace(/^#{1,2}/,""),i=e.$list.find(".b_".concat(t,', .b_block ._anchor[name="').concat(t,'"]')).eq(0);i&&e.scrollTo(i.closest(".b_block"))}})},bind:function(e){var t=e.attr("data-b-id");if(e.data("_core"))return!0;this.data[t]||this.register(t);var i=new this.data[t](e);e.data("_core",i),i._on_init()},update:function(e){var t=e.data("_core");t&&"function"==typeof t._on_update&&t._on_update()},register:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e||console.log("Секция должна иметь уникальный номер"),"undefined"!=typeof jQuery){this.data[e]=function(t){this.$area=t,this.$block=t,this.template_id=e,this.id=t.data("id"),this.type=t.data("bType")||[]};var n=$.extend(!0,{},this.proto);this.data[e].prototype=_extends({},n,i)}else setTimeout(function(){return t.register(e,i)},20)},updateTweens:function(){this.$list.find("[data-b-id]").each(function(e,t){var i=$(t).data("_core");i&&i._tween()})},scrollTo:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"object"!==_typeof(e)&&(e=$('.b_block[data-id="'.concat(e,'"]')));var n=e.data("_core");if(n&&n.tween){var o=n.tween.start;i&&n.tween.height>flexbe_cli.resize.height?o=n.tween.start+(n.tween.height-flexbe_cli.resize.height)/2:t&&(o=n.tween.start-n.tween.fix/2,n.tween.fix<180&&flexbe_cli.run.is_screen_pc&&$('[data-b-type*="header"][data-b-type*="floating"]').length&&(o-=80)),$("body, html").animate({scrollTop:o})}},initHeaders:function(){var e=this;this.setHeaders(),flexbe_cli.is_admin&&(flexbe_cli.events.off("editor_change.core_headers").on("editor_change.core_headers",function(t,i){i&&i.reason&&(i.entity&&i.entity.hasType("allow_head")||"editor_settings"===i.reason&&"overflow"===i.name)&&e.setHeaders()}),flexbe_cli.events.off("layout_change.core_headers").on("layout_change.core_headers",function(t,i){e.setHeaders()}))},_setHeadersDebounce:0,setHeaders:function(){var e=this;clearTimeout(this._setHeadersDebounce),this._setHeadersDebounce=setTimeout(function(){var t=$("header"),i='[data-b-type*="header"][data-b-type*="overflow"]',n="b_head";$(".b_block > .".concat(n)).each(function(e,o){var a=$(o);if("site"===o.getAttribute("data-header-type")&&t[0])a.removeClass(n).removeAttr("data-header-type"),t.prepend(a);else{var s=o.getAttribute("data-owner");(!a.is(i)||!s||!a.parents(".b_block").is("[data-id=".concat(s,"]")))&&(a.removeClass(n).removeAttr("data-header-type"),a.parents(".b_block, .ab-test, .flexbe-block-replace-container").last().before(a))}}),$(".container-list > ".concat(i,", .container-list > .ab-test > ").concat(i)).filter("[data-owner]").each(function(t,i){var o=i.getAttribute("data-owner"),a=$(".b_block[data-id=".concat(o,"]")),s=$(i);a.length&&(a.prepend(i),s.addClass(n),e.fixHeaderHeight(a,s))}),t.find(i).add('.container-list [data-header-type="site"]').each(function(t,i){var o,a=$(i),s=$(".container-list").find("> .b_block, > .flexbe-block-replace-container, > .ab-test").eq(0);if(s.hasClass("b_block"))o=s.filter('[data-b-type*="allow_head"]');else if(s.hasClass("ab-test")){var r=s.filter('[data-current="a"]').find('[data-abtest-variant="a"][data-b-type*="allow_head"]'),l=s.filter('[data-current="b"]').find('[data-abtest-variant="b"][data-b-type*="allow_head"]');o=r.add(l)}o&&o.length&&!o.find("> .".concat(n)).length&&!o.prev().is('[data-b-type*="overflow"]')&&(o.find("> .".concat(n)).remove(),o.prepend(i),a.attr("data-header-type","site").addClass(n),e.fixHeaderHeight(o,a))})},30)},fixHeaderHeight:function(e,t){var i=this;if(e[0]&&t[0]){var n=e.attr("data-id"),o=e.find("> .container-fluid").eq(0).find("> .container").eq(0),a=o.children().eq(0);o.css("paddingTop","");var s=parseInt(o.css("paddingTop"),10),r=t.outerHeight(),l=a.offset().top-s-o.offset().top,c=r-l,d=a.outerHeight(!0)-a.outerHeight();l>=0&&l<r&&o.css("paddingTop","".concat(c+d-l,"px")),$(window).off("resized.fixHeaderHeight".concat(n)).on("resized.fixHeaderHeight".concat(n),function(){i.fixHeaderHeight(e,t)})}},fixCoverHeight:function(e){var t=this,i=e.find(".cover"),n=i.length&&e.prevAll(".b_block").eq(0).filter('[data-b-type*="header"]').not('[data-b-type*="overflow"]');if(i.length){var o=e.attr("data-id"),a=flexbe_cli.resize.height,s=n.outerHeight()||0;s>5&&(s-=5);var r=a-s+2;flexbe_cli.run.is_ie&&i.css("height","".concat(r,"px")),i.css("min-height","".concat(r,"px")),$(window).off("resized.fixCoverHeight".concat(o)).on("resized.fixCoverHeight".concat(o),function(){Math.abs(flexbe_cli.resize.height-a)>100&&(a=flexbe_cli.resize.height,t.fixCoverHeight(e))})}}},flexbe_cli.stat={u_id:0,time:0,goals:{quiz:"quiz_start",modal:"modal_open",modal_form:"form_open",modal_product:"product_show",modal_done:"order_done",cart:"add_to_cart",link:"link_open",file:"file_load",close:"modal_close"},init:function(){var e=navigator.userAgent.toLowerCase().indexOf("slimerjs")>-1||navigator.userAgent.toLowerCase().indexOf("phantomjs")>-1,t=getCookie("user_id");if(!(flexbe_cli.is_admin||t||e)){var i=getCookie("f_uid");i?(this.u_id=i,this.user_visit()):this.user_create(),this.AB.init(),this.ecommerce.init()}},getGoal:function(e,t){return"modal"===e&&(/form/.test(t)&&(e="modal_form"),/done/.test(t)?e="modal_done":/product/.test(t)&&(e="modal_product")),this.goals[e]||!1},reach_goal:function(e,t){if(t=void 0!==t?t:{},!flexbe_cli.is_admin)try{if(flexbe_cli.yandex_id)var i=setInterval(function(){if("undefined"==typeof Ya||"object"!==_typeof(Ya._metrika.counter))return!1;clearInterval(i),Ya._metrika.counter.reachGoal(e,t)},50);"function"==typeof ga&&ga("send","event",e,"send")}catch(e){}},ecommerce:{currencyCodes:{"€":{code:"EUR",name:"Евро"},Br:{code:"BYR",name:"Белорусский Рубль"},"₴":{code:"UAH",name:"Гривна"},"грн.":{code:"UAH",name:"Гривна"},"₸":{code:"KZT",name:"Тенге"},"тңг":{code:"KZT",name:"Тенге"}},currencyCode:"RUB",initialized:!1,init:function(){flexbe_cli.lang.currency&&this.currencyCodes[flexbe_cli.lang.currency]&&(this.currencyCode=this.currencyCodes[flexbe_cli.lang.currency].code),this.initialized=!0,window.dataLayer||(window.dataLayer=[])},add:function(e,t,i,n){if(this.initialized){window.dataLayer.push({ecommerce:{currencyCode:this.currencyCode,add:{products:[{id:e,name:t,price:n,quantity:i}]}}})}},remove:function(e,t){if(this.initialized){window.dataLayer.push({ecommerce:{currencyCode:this.currencyCode,remove:{products:[{id:e,name:t}]}}})}},purchase:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.initialized&&(e||0!=e.length)){t||(t=Math.ceil(1e4*Math.random()));try{window.dataLayer.push({ecommerce:{currencyCode:this.currencyCode,purchase:{actionField:{id:t},products:e.map(function(e){return{id:e.id,name:e.title,price:e.price,quantity:e.count}})}}})}catch(e){}}}},get_utm:function(){var e=function(e){if(""===e)return{};for(var t={},i=0;i<e.length;++i){var n=e[i].split("=");2==n.length&&(t[n[0]]=decodeURIComponent(n[1].replace(/\+/g," ")))}return t}(window.location.search.substr(1).split("&")),t={};return $.each(e,function(e,i){"utm_"===e.substring(0,4)&&(t[e]=i)}),document.referrer&&(t.url=document.referrer),t},user_create:function(){var e=this;$.ajax({url:"/mod/stat/",type:"POST",dataType:"json",data:{s_id:flexbe_cli.s_id,group_id:flexbe_cli.group_id,p_id:flexbe_cli.p_id,utm_data:this.get_utm()}}).done(function(t){"object"==_typeof(t)&&null!==t&&t.u_id?(setCookie("f_uid",t.u_id,{Path:"/"}),e.u_id=t.u_id):console.warn("cookie не установлена",t)})},user_visit:function(){$.ajax({url:"/mod/stat/visit/",type:"POST",dataType:"json",data:{s_id:flexbe_cli.s_id,group_id:flexbe_cli.group_id,p_id:flexbe_cli.p_id,u_id:this.u_id}}).done($.proxy(function(e){e.v_id||console.warn("cookie визита не установлена",e)},this))},AB:{init:function(){var e=this;flexbe_cli.events.off("entity_screen.abstat").on("entity_screen.abstat",function(t,i){if(i&&"screen"===i.event&&i.state&&i.core&&"block"===i.core.is){var n=i.core.$area;e.fixview(n.attr("data-abtest-id"),n.attr("data-abtest-variant"))}})},setcookie:function(e){setCookie("f_ab",JSON.stringify(e),{expires:604800,path:"/",domain:document.location.hostname})},getcookie:function(){var e=!0,t=getCookie("f_ab");if(t)try{t=JSON.parse(decodeURIComponent(t)),e=!1}catch(t){console.warn("cant parse abtest cookie",t),e=!0}return e&&(t={view:{},lead:[]}),t},proccess:{},fixview:function(e,t){if(void 0===e||void 0===t||"a"!=t&&"b"!=t)return!1;void 0!==this.getcookie().view[e]||this.proccess[e]||(this.proccess[e]=!0,$.ajax({url:"/mod/stat/abtest",type:"POST",dataType:"json",data:{test_id:e,variant:t,s_id:flexbe_cli.s_id,p_id:flexbe_cli.p_id}}).done($.proxy(function(i){if(this.proccess[e]=!1,1==i.status){var n=flexbe_cli.stat.AB.getcookie();n.view[e]=t,flexbe_cli.stat.AB.setcookie(n)}},this)))},fixlead:function(e){if(flexbe_cli.bill&&1!=flexbe_cli.bill.abtest)return!1;if(e.length>0){var t=this.getcookie(),i=$.merge(t.lead,e);t.lead=$.grep(i,function(e,t){return $.inArray(e,i)===t}),this.setcookie(t)}}}},flexbe_cli.timer={list:{},create:function(e){return this.list[e.id]=new flexbe_cli.timer.Timer(e),this.list[e.id]}},flexbe_cli.timer.Timer=function(e){this.o=e,this.create()},flexbe_cli.timer.Timer.prototype={o:{},create:function(){var e=$(this.o.block).find(this.o.item),t=e.data("time"),i=new Date;if(this.lang(e),"date"==t.type){var n=t.my?t.my.toString().split("."):[1,2018];this.final_date=new Date(n[1],parseInt(n[0],10)-1,t.d,t.h,t.m)}else if("monthly"==t.type)this.final_date=new Date(i.getFullYear(),i.getMonth(),t.d,t.h,t.m),i.getTime()>this.final_date.getTime()&&(this.final_date=new Date(i.getFullYear(),i.getMonth()+1,t.d,t.h,t.m)),parseInt(t.d,10)!=this.final_date.getDate()&&(this.final_date.setDate(0),i.getTime()>this.final_date.getTime()&&(this.final_date=new Date(this.final_date.getFullYear(),this.final_date.getMonth()+2,0,t.h,t.m)));else if("weekly"==t.type){var o=parseInt(i.getDate(),10)-parseInt(i.getDay(),10)+parseInt(t.dw,10);this.final_date=new Date(i.getFullYear(),i.getMonth(),o,t.h,t.m),i.getTime()>this.final_date.getTime()&&this.final_date.setDate(this.final_date.getDate()+7)}else"daily"==t.type?(this.final_date=new Date(i.getFullYear(),i.getMonth(),i.getDate(),t.h,t.m),i.getTime()>this.final_date.getTime()&&this.final_date.setDate(this.final_date.getDate()+1)):(this.final_date=new Date,this.final_date.setMonth(this.final_date.getMonth()+1,15));this.item_d_1=e.find(".d [data-value]").eq(0),this.item_d_2=e.find(".d [data-value]").eq(1),this.item_d_3=e.find(".d [data-value]").eq(2),this.item_h_1=e.find(".h [data-value]").eq(0),this.item_h_2=e.find(".h [data-value]").eq(1),this.item_m_1=e.find(".m [data-value]").eq(0),this.item_m_2=e.find(".m [data-value]").eq(1),this.item_s_1=e.find(".s [data-value]").eq(0),this.item_s_2=e.find(".s [data-value]").eq(1),this.last_offset={d:void 0,h:void 0,m:void 0,s:void 0},!flexbe_cli.is_admin&&this.final_date.getTime()<(new Date).getTime()?$(this.o.block).hide():this.start()},update:function(){if(this.second_left=this.final_date.getTime()-(new Date).getTime(),this.second_left=Math.ceil(this.second_left/1e3),this.second_left=this.second_left<0?0:this.second_left,this.offset={d:Math.floor(this.second_left/60/60/24),h:Math.floor(this.second_left/60/60)%24,m:Math.floor(this.second_left/60)%60,s:this.second_left%60},this.last_offset.d!=this.offset.d){var e=this.offset.d.toString().split("");e.length<2&&e.unshift(0),e.length<3&&e.unshift(0),this.item_d_1.attr("data-value",e[0]).text(e[0]),this.item_d_2.attr("data-value",e[1]).text(e[1]),this.item_d_3.attr("data-value",e[2]).text(e[2])}if(this.last_offset.h!=this.offset.h){var t=this.offset.h.toString().split("");t.length<2&&t.unshift(0),this.item_h_1.attr("data-value",t[0]).text(t[0]),this.item_h_2.attr("data-value",t[1]).text(t[1])}if(this.last_offset.m!=this.offset.m){var i=this.offset.m.toString().split("");i.length<2&&i.unshift(0),this.item_m_1.attr("data-value",i[0]).text(i[0]),this.item_m_2.attr("data-value",i[1]).text(i[1])}if(this.last_offset.s!=this.offset.s){var n=this.offset.s.toString().split("");n.length<2&&n.unshift(0),this.item_s_1.attr("data-value",n[0]).text(n[0]),this.item_s_2.attr("data-value",n[1]).text(n[1])}this.last_offset=this.offset,this.second_left<0&&this.stop()},start:function(){null!==this.interval&&clearInterval(this.interval),this.update(),this.interval=setInterval($.proxy(function(){this.update()},this),200)},stop:function(){clearInterval(this.interval),this.interval=null},lang:function(e){e.find("[data-timer-text]").each(function(e,t){var i=$(t).attr("data-timer-text"),n=flexbe_cli.lang.get("timer.".concat(i));$(t).text(n)})}},flexbe_cli.widget={data:{},proto:{is:"widget",require:[],_on_init:function(){var e=this;flexbe_cli.require(this.require,function(){e.on_load(),e.on_init(),e.isInit=!0,flexbe_cli.events.emit("widget_event",{event:"inited",sender:"core",core:e})})},_on_update:function(){var e=this;flexbe_cli.require(this.require,function(){e.on_load(),e.on_update(),flexbe_cli.events.emit("widget_event",{event:"updated",sender:"core",core:e})})},_on_msg:function(e,t){this.on_msg(e,t)},on_load:function(){},on_init:function(){},on_update:function(){},on_msg:function(){}},init:function(){var e=this;this.$list=$(".widget-list"),this.$list.find(".w_widget").each(function(t,i){e.bind($(i))}),flexbe_cli.events.on("widget_add",function(t,i){if(i&&i.id){var n=$('.w_widget[data-id="'.concat(i.id,'"]'));e.bind(n)}}),flexbe_cli.events.on("widget_render",function(e,t){if(t&&t.id&&~t.render.indexOf("template")){var i=$('.w_widget[data-id="'.concat(t.id,'"]')).data("_core");void 0!==i&&"function"==typeof i._on_update&&i._on_update()}}),flexbe_cli.events.on("client_msg.widget",function(e,t){if(t&&t.id&&"widget"===t.is){var i=$('.w_widget[data-id="'.concat(t.id,'"]')).data("_core");void 0!==i&&i._on_msg(t.msg,t.data)}})},bind:function(e){var t=e.attr("data-w-id");if(e.data("_core"))return!0;this.data[t]||this.register(t,{});var i=new this.data[t](e);"object"===_typeof(i)&&(e.data("_core",i),i._on_init())},register:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e||console.log("Виджет должен иметь уникальный номер!"),"undefined"!=typeof jQuery){flexbe_cli.widget.data[e]=function(t){this.$area=t,this.$widget=t,this.template_id=e,this.id=t.data("id"),this.type=t.data("wType")||[]};var n=$.extend(!0,{},this.proto);flexbe_cli.widget.data[e].prototype=_extends({},n,i)}else setTimeout(function(){return t.register(e,i)},20)}},flexbe_cli.components={init:function(){var e=this,t=function(t,i,n){e.image.setAll(t),e.background.loadImage(t),"block"===n&&i&&e.background.video.play(t),i&&e.slider.init(t),"pageload"!==n&&(e.maps.init(t),e.slider.toggleAutoplay(t,i))};this.links(),this.video.init(),flexbe_cli.events.on("entity_init.flexbe_components",function(t,i){!function(t,i){flexbe_cli.lang.init(t),e.background.init(t),e.image.init(t),e.button.init(t),flexbe_cli.quiz&&flexbe_cli.quiz.init(t)}(i.core.$area,i.core.is)}),flexbe_cli.events.on("entity_screen.flexbe_components",function(e,i){t(i.core.$area,i.state,i.core.is)}),$(window).off("load.flexbe_components").one("load.flexbe_components",function(){setTimeout(function(){flexbe_cli.block.$list.find(".b_block").each(function(e,i){t(i,!1,"pageload")})},500)})},links:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"body";$(e).off("click.component-links").on("click.component-links","a[href], a[data-action]",function(e){var t=$(e.currentTarget).attr("href"),i=$(e.currentTarget).attr("data-action");if(t||i){if(/#{1,2}.+/.test(t)){if(1===flexbe_cli.theme_id){$(e.currentTarget).closest(".mobile-menu").removeClass("active")}else $("body > .mobile-menu").trigger("close"),$("body").removeClass("overflow fixed");var n=(t=t.replace(/^(?:\.\/)#{2}/,"#").trim()).trim().split("#"),o=""===n[0]||"./"===n[0]?location.pathname:n[0],a=n[n.length-1];if(o!==location.pathname)return!0;var s=flexbe_cli.block.$list.find(".b_".concat(a,', ._anchor[name="').concat(a,'"]')).eq(0),r=flexbe_cli.modal.$list.find(".m_".concat(a,', ._anchor[name="').concat(a,'"]')).eq(0);if(s.length){flexbe_cli.events.emit("modal_command",{command:"close"});var l=s.closest(".b_block");flexbe_cli.block.scrollTo(l)}else if(r.length){var c=r.closest(".m_modal").data("id");flexbe_cli.events.emit("modal_command",{command:"open",id:c,data:{}})}e.preventDefault(),e.stopPropagation()}else if("button"===i){$(e.currentTarget).closest("[data-item-id]").find(".component-button")[0].click()}return!0}})},button:{init:function(e){var t=e.closest(".w_widget")[0]?e:e.find("> .container-fluid, > .modal-data"),i=e.data("id");t.off("click.component-button").on("click.component-button",".component-button",function(t){if(flexbe_cli.is_admin)return t.preventDefault(),!0;var n=$(t.currentTarget),o=n.closest("[data-item-id], .modal-data").eq(0),a=n.attr("data-action"),s=n.attr("data-modal-id"),r=n.data("product");if(a){var l=flexbe_cli.stat.getGoal(a,s);flexbe_cli.stat.reach_goal(l);try{var c=n.find('[name="goal"]').val();c&&flexbe_cli.stat.reach_goal(c);var d=n.find('[name="goal_html"]').val();d&&($("body").find(".button-html-goal").detach(),$("body").eq(0).append('<div class="button-html-goal" style="display:none"></div>'),$("body").find(".button-html-goal").html(d))}catch(e){}if(o[0]&&"link"!==a&&"file"!==a&&"close"!==a){var f=o.find(".price, .item-price, .main-price").eq(0).clone();f.find("del, s").remove();var u=o.find(".name, .title, .item-title, .text_title").eq(0),h=o.find("[data-img-id]").filter(function(e,t){return!$(t).closest(".swiper-slide-duplicate").length}).eq(0);(r=_extends({count:1,img:!!(h.length&&h.attr("data-img-id")&&h.attr("data-img-name"))&&"/img/".concat(h.attr("data-img-id"),"_200/").concat(h.attr("data-img-name")),title:u.text().trim()||"-",price:parseFloat(f.text().replace(/[,.]/g,".").replace(/\.$/,"").replace(/[^\d.]/g,""))||0},r)).title&&"-"!==r.title||(r=!1)}if(r&&"object"==_typeof(r)&&!r.id&&(r.id="".concat(flexbe_cli.p_id,"_").concat(i,"_").concat(o.data("itemId")||0).concat(e.data("multivar")||"")),r=!!r&&[r],a.match(/^modal|^form/)&&s){if(!flexbe_cli.modal.find(s)){var m=parseInt(String(i).split("_")[0],10);s="".concat(m,"_").concat(s)}flexbe_cli.events.emit("modal_command",{command:"open",id:s,data:{items:r}})}else r[0]&&a.match(/^cart$/)?(flexbe_cli.events.emit("cart_command",{command:"add",item:r[0]}),n.addClass("animate-add-to-cart"),setTimeout(function(){n.removeClass("animate-add-to-cart"),n.closest(".m_modal").length&&flexbe_cli.events.emit("modal_command",{command:"close"})},1600)):"quiz"===a?flexbe_cli.events.emit("quiz_command",{command:"start",id:i}):"close"===a&&flexbe_cli.events.emit("modal_command",{command:"close"})}})}},image:{done:[],init:function(){},setAll:function(e){var t=this;if(!flexbe_cli.is_admin){var i=$(e).attr("data-id");if(this.done.indexOf(i)>=0)return;this.done.push(i)}$(".component-image",e).not(".lazyload, .component-slider .component-image").each(function(e,i){t.set(i)})},set:function(e){function t(e,t){var i=new Image;i.onload=function(){t(i)},i.src=e}function i(t){var i="url(".concat(t,")"),n="".concat(r.x," ").concat(r.y);a&&(a.src=t),s&&(s.style.backgroundImage=i,s.style.backgroundPosition=n),"background"===r.type&&(e.style.backgroundImage=i,e.style.backgroundPosition=n)}function n(){e.classList.remove("loading")}var o=this;if(e&&!e.processed){e.processed=!0;var a=e.querySelector("img"),s=e.querySelector(".loading-img"),r=this.getImageData(e);if(r.resizable&&r.offsetWidth>200){var l=a.src||this.getImageUrl(r,100);i(l),e.classList.add("loading"),t(l,function(e){var a=o.getOptimalParams(r.offsetWidth,r.offsetHeight,e.naturalWidth,e.naturalHeight),s=o.getImageUrl(r,a.width);t(s,function(){i(s),n()})})}else{var c=this.getImageUrl(r,2*r.offsetWidth);a.src&&a.src!==c?t(c,function(){i(c),n()}):(i(c),n())}}},getImageData:function(e){if(!e)return!1;var t={x:e.getAttribute("data-img-x"),y:e.getAttribute("data-img-y"),id:e.getAttribute("data-img-id"),type:e.getAttribute("data-img-type"),name:"".concat(e.getAttribute("data-img-name")),offsetWidth:e.offsetWidth,offsetHeight:e.offsetHeight};if(t.ext=e.getAttribute("data-img-ext"),!t.ext){var i=t.name.match(/\.([a-z]{1,4})$/);t.ext=i&&i[1]||"jpg"}return t.resizable="svg"!==t.ext,!!(t.id&&t.name&&t.type)&&t},getOptimalParams:function(e,t,i,n){var o,a,s=n/i,r=t/e,l=Math.max(1,window.devicePixelRatio||1);return 1===l&&e<=200&&(l=2),r>s?(o=t/s,a=t):(o=e,a=e*s),o=Math.floor(o*l),a=Math.floor(a*l),{width:o,height:a}},getImageUrl:function(e,t){return(t=t||e.width)&&"big"!==e.type&&"svg"!==e.ext?"/img/".concat(e.id,"_").concat(t,"/").concat(e.name):"/img/".concat(e.id,"/").concat(e.name)},replacePlaceholder:function(e){e&&0!==e.length&&e.each(function(e,t){var i=$(t).data("src"),n=$(t).data("srcset"),o=new Image;o.onload=function(){i&&(t.src=i),n&&(t.srcset=n),$(t).addClass("loaded")},i&&(o.src=i),n&&(o.srcset=n)})}},slider:{stack:{},init:function(e){var t=this,i=$(e).attr("data-id"),n=$(".component-slider",e);n.length&&flexbe_cli.require("/_s/lib/swiper/swiper.v4.js",function(){n.each(function(n,o){var a=i?e:$(o).parents("[data-id]"),s=i||$(a).attr("data-id"),r=t.setSlider(a,n,o);Array.isArray(t.stack[s])||(t.stack[s]=[]),t.stack[s].push(r)})})},toggleAutoplay:function(e,t){if(flexbe_cli.is_admin)return!1;var i=$(e).attr("data-id");if(!Array.isArray(this.stack[i]))return!1;this.stack[i].forEach(function(e){return e&&e.autoplay.running&&e.autoplay[t?"run":"pause"]()})},setSlider:function(e,t,i){var n=$(e),o=$(i),a=Math.floor(o.data("count")),s=!flexbe_cli.is_admin&&a>1&&Math.floor(o.data("loop")),r=$(".slider-button",o),l={prevEl:r[0],nextEl:r[1]},c={el:$(".slider-pagination",o)[0],type:o.data("pagination"),clickable:!0},d=Math.floor(o.data("autoplay"))||!1;!flexbe_cli.is_admin&&d&&(d={delay:1e3*d,stopOnLast:!0});var f=Math.floor(n.data("slide-move-".concat(t)))||0;f=Math.max(0,Math.min(a-1,f));var u=function(e){$(".component-image",e).each(function(e,t){flexbe_cli.components.image.set(t)})};if(u(o.find('[data-real-index="'.concat(f,'"]'))),a>1&&o.one("mouseenter.loadImages",function(){u(o)}),!(a<=1)){var h=new Swiper(o.find(".slider-wrapper")[0],{wrapperClass:"slider",slideClass:"slider-item",slideActiveClass:"active",noSwipingClass:"redactor-box",initialSlide:f,speed:450,navigation:l,pagination:c,autoplay:d,loop:s,simulateTouch:!1,touchMoveStopPropagation:!1,preventClicksPropagation:!1,preventClicks:!1,runCallbacksOnInit:!1,on:{init:function(){$(".swiper-slide-duplicate .img-popup",this.$wrapperEl).on("click",function(e){var t=$(e.currentTarget).parents(".swiper-slide-duplicate");$(".img-popup",t.siblings(".slider-item[data-real-index=".concat(t.attr("data-real-index"),"]"))).trigger("click"),e.preventDefault()})},slideChange:function(){var e=$(this.slides[this.activeIndex]);n.data("slide-move-".concat(t),this.realIndex),o.attr("data-current-content",e.attr("data-type")),u(e.add(e.next()).add(e.prev()))}}}),m=n.data("_core");return m&&"block"===m.is&&!m.tween.onscreen&&h.autoplay.pause(),h}}},video:{instances:{},init:function(){var e=this;flexbe_cli.events.on("entity_init.componentvideo",function(t,i){var n=i.core,o=n.id,a=n.$area.find(".component-video").toArray();a.length?e.instances[o]=a.map(function(t){return e.componentVideo(o,t)}):delete e.instances[o]}),flexbe_cli.events.on("entity_screen.componentvideo",function(t,i){var n=i.core.id,o=e.instances[n];o&&o.forEach(function(e){return e.view(i.state)})})},componentVideo:function(e,t){function i(){this.ownerId=e,this.$component=$(t),this.isInit=!1,this.isView=!1,this.isRun=!1,this.init()}return i.prototype.init=function(){this.isInit=!0,"function"==typeof this.onInit&&this.onInit()},i.prototype.view=function(e){var t=e&&!this.isView;e&&(this.isView=!0),"function"==typeof this.onView&&this.onView({isFirstView:t,state:e})},i.prototype.onInit=function(){var e=this;$(".video-preview",this.$component).on("click",function(t){var i=$(t.currentTarget).parents(".slider-wrapper").get(0);t.preventDefault(),i&&i.swiper&&i.swiper.autoplay.pause();var n=e.$component.find("iframe"),o=n.attr("data-src")||n.attr("src");o&&(n[0].src="".concat(o,"&autoplay=1")),setTimeout(function(){e.$component.attr("data-state","play")},250)})},i.prototype.onView=function(e){if(!e.state||!e.isFirstView)return!1;var t=this.$component.find("iframe"),i=t.attr("data-src"),n=t.attr("src");i&&!n&&(t[0].src="".concat(i))},new i}},maps:{init:function(e){var t=this;$(".component-map",e).each(function(e,i){t.create(i)})},create:function(e){var t=this,i=$(e),n=i.data("inited"),o=i.data("data");if(n)return!1;i.data("inited",!0),i.removeAttr("data-data"),"google"==o.type?flexbe_cli.require(["//maps.googleapis.com/maps/api/js?key=AIzaSyAuc1CX3_a9QASrIlndml62145Zb65ea0M"],function(){t.google.init(i,o),i.removeClass("loading")}):flexbe_cli.require(["//api-maps.yandex.ru/2.1/?lang=ru_RU"],function(){ymaps.ready(function(){t.yandex.init(i,o),i.removeClass("loading")})})},yandex:{init:function(e,t){this.create(e,t),this.setPlaces(e,t.places),this.events(e,t),this.fixBehavior(e),e.trigger("mapInit",e,t)},create:function(e,t){var i=e.data("map");return i&&"function"==typeof i.destroy&&i.destroy(),i=new ymaps.Map(e.find(".map")[0],{center:t.center,zoom:t.zoom,controls:["zoomControl"],behaviors:["default","scrollZoom"],type:"yandex#map"}),e.data("map",i),i},setPlaces:function(e,t){var i=e.data("map");if(i){i.geoObjects.removeAll();var n=ymaps.templateLayoutFactory.createClass('<svg title="$[properties.balloonContent]" class="placemark" width="32" height="48" viewBox="0 0 24 32" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36 0 0 5.36 0 12c0 8 12 20 12 20s12-12 12-20c0-6.64-5.36-12-12-12zm0 8a4 4 0 0 1 4 4c0 2.22-1.78 4-4 4a4 4 0 0 1-4-4c0-2.2 1.8-4 4-4z" fill="$[properties.color]" fill-rule="evenodd"/></svg>');ymaps.layout.storage.add("custom#placemark",n),t.forEach(function(t,n){t.color=t.color||"#3D52B0";var o=new ymaps.Placemark(t.coords,{balloonContentHeader:t.name||!1,balloonContent:t.address,color:t.color},{hideIconOnBalloonOpen:!1,balloonOffset:[0,-48],balloonCloseButton:!1,iconLayout:"custom#placemark",iconShape:{type:"Rectangle",coordinates:[[-16,-48],[16,0]]}});o.events.add("balloonopen",function(){e.trigger("balloonOpen",n,t)}),i.geoObjects.add(o),t._mark=o})}},events:function(e,t){var i=e.data("map");i&&(e.on("selectMark",function(e,n){if(t.places.length&&t.places[n]){var o=t.places[n];i.setCenter(o.coords,t.zoom,{duration:350,checkZoomRange:!0}).then(function(){i.setCenter(o.coords)}),o._mark&&o._mark.balloon.open()}}),e.on("resizeMap",function(e,t){i.container.fitToViewport()}))},fixBehavior:function(e){var t=e.data("map");if(t){var i;t.behaviors.disable("scrollZoom"),e.off("mouseenter.preventzoom").on("mouseenter.preventzoom",function(){i=setTimeout(function(){t.behaviors.enable("scrollZoom")},500)}),e.off("mouseleave.preventzoom").on("mouseleave.preventzoom",function(){i&&(clearTimeout(i),t.behaviors.disable("scrollZoom"))}),flexbe_cli.run.is_mobile&&t.behaviors.disable("drag")}}},google:{init:function(e,t){this.create(e,t),this.styleMap(e,t),this.setPlaces(e,t.places),this.events(e,t),this.fixBehavior(e),e.trigger("mapInit",e,t)},create:function(e,t){var i=e.data("map");return i&&"function"==typeof i.destroy&&i.destroy(),i=new google.maps.Map(e.find(".map")[0],{center:{lat:t.center[0],lng:t.center[1]},zoom:t.zoom,disableDefaultUI:!0,panControl:!0,zoomControl:!0,mapTypeControl:!1,streetViewControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!1}),e.data("map",i),i},setPlaces:function(e,t){var i=this,n=e.data("map");n&&t.forEach(function(o,a){var s='<svg width="32" height="48" viewBox="0 0 24 32" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36 0 0 5.36 0 12c0 8 12 20 12 20s12-12 12-20c0-6.64-5.36-12-12-12zm0 8a4 4 0 0 1 4 4c0 2.22-1.78 4-4 4a4 4 0 0 1-4-4c0-2.2 1.8-4 4-4z" fill="'.concat(o.color||"#222",'" fill-rule="evenodd"/></svg>'),r=new google.maps.Marker({position:{lat:o.coords[0],lng:o.coords[1]},map:n,visible:!0,animation:google.maps.Animation.DROP,icon:{url:"data:image/svg+xml;charset=UTF-8,".concat(encodeURIComponent(s))}});o._mark=r,r.addListener("click",function(){i.selectMark(e,t,a)})})},styleMap:function(e,t){var i=e.data("map");if(i)if("default"!=t.style&&t.style){var n="/_s/lib/google/maps/styles/".concat(t.style,".json");$.getJSON(n,function(e){e&&Array.isArray(e)&&i.setOptions({styles:e})})}else i.setOptions({styles:[]})},selectMark:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e.data("map");if(o&&t&&t.length&&t[i]){t.forEach(function(e){return e._info&&e._info.close()});var a=t[i],s="";a.name&&(s+='<div style="margin-bottom: 3px;"><strong>'.concat(a.name,"</strong></div>")),a.address&&(s+="<div>".concat(a.address,"</div>")),a._info=new google.maps.InfoWindow({content:s}),a._info.open(o,a._mark),n&&o.panTo({lat:a.coords[0],lng:a.coords[1]}),e.trigger("balloonOpen",i,a)}},events:function(e,t){var i=this,n=e.data("map");n&&(e.on("selectMark",function(n,o){i.selectMark(e,t.places,o,!0)}),e.on("resizeMap",function(e,t){google.maps.event.trigger(n,"resize")}))},fixBehavior:function(e){var t=e.data("map");if(t){var i;e.off("mouseenter.preventzoom").on("mouseenter.preventzoom",function(){i=setTimeout(function(){t.setOptions({scrollwheel:!0})},500)}),e.off("mouseleave.preventzoom").on("mouseleave.preventzoom",function(){i&&(clearTimeout(i),t.setOptions({scrollwheel:!1}))})}}}},background:{factor:.6,frames:{},init:function(e){var t=this;this.getParallaxOffset(e),$(window).off("resized.component-bg layout_change.component-bg").on("resized.component-bg layout_change.component-bg",function(){t.getParallaxOffset(e)})},loadImage:function(e){if(!flexbe_cli.is_admin){var t=$(".component-bg",e),i=t.find(".image"),n=i.find(".loader-image"),o=n.attr("data-src");if(o){var a=new Image;a.onload=function(){i.css("backgroundImage",""),t.removeClass("loading"),setTimeout(function(){n.remove()},300)},a.src=o}}},debounce:{},getParallaxOffset:function(e){var t=this,i=e.find('[data-parallax="true"]').find(".image-holder, .video_bg_container"),n=i.find(".image, .video_bg_player")[0],o=e.data("_core");if(n&&o)if(flexbe_cli.resize.height<o.tween.height?i.css("height","".concat(o.tween.height,"px")):i.css("height",""),(flexbe_cli.run.is_screen_pc||flexbe_cli.run.is_screen_small_pc)&&flexbe_cli.run.is_desktop){var a=!1;$(window).off("scroll.component-bg-".concat(o.id)).on("scroll.component-bg-".concat(o.id),function(){!a&&o.tween.onscreen&&(a=!0,requestAnimationFrame(function(){var e=o.tween.start,i=1-(1-t.factor)*(o.tween.height/flexbe_cli.resize.height);i<0&&(i=t.factor/2),n.style.transform="translate3d(0, ".concat(-(window.pageYOffset-e)*i,"px, 0)"),a=!1}))})}else $(window).off("scroll.component-bg-".concat(o.id)),n.style.transform="none"},video:{play:function(e,t){var i=$(e),n=$(".component-bg.bg-video",e);if(!n.length)return!1;if(t||(t=n.data("video")),!t||"youtube"!==t.type||"string"!=typeof t.id||t.id.length<1)return!1;if(flexbe_cli.run.is_screen_mobile||flexbe_cli.run.is_screen_tablet_s)return!1;if(n.data("video_bg_played")){if(t.id===n.data("video_bg_played"))return;this.destroy(i)}n.data("video_bg_played",t.id),flexbe_cli.require(["/_s/lib/jquery/youtubebackground/jquery.youtubebackground.js"],function(){n.YTPlayer({videoId:t.id,videoURL:t.url,callback:function(){setTimeout(function(){flexbe_cli.components.background.init(i)},1e3)}})})},destroy:function(e){var t=$(".component-bg.bg-video",e);t.data("ytPlayer")&&t.data("ytPlayer").destroy(),t.removeData("video_bg_played")}}}},flexbe_cli.run.init=function(){flexbe_cli.lang.init(),flexbe_cli.scroll.init(),flexbe_cli.resize.init(),flexbe_cli.components.init(),flexbe_cli.block.init(),flexbe_cli.modal.init(),flexbe_cli.widget.init(),flexbe_cli.lib.init(),flexbe_cli.stat.init()},window.flexbeAPI={customLeadData:{}},flexbe_cli.form={list:{},create:function(e){if(!flexbe_cli.is_admin)return this.list[e.id]=new flexbe_cli.form.Form(e),this.list[e.id]}},flexbe_cli.form.Form=function(e){this.o=e,this.create()},flexbe_cli.form.Form.prototype={o:{},create:function(){this.$data=this.o.block.find(this.o.form),this.bind()},bind:function(){if(this.$form=this.$data.find("form").eq(0),!(this.$form.length<1)){var e=$('<input type="hidden" name="jsform" value="'+parseInt(448312,10)+'">');this.$form.find('input[name="p_id"]').val(flexbe_cli.p_id).after(e),this.$form.find(".form_field_submit").off("click").on("click",$.proxy(function(){this.$form.submit()},this)),this.$form.off("submit").on("submit",$.proxy(function(e){if(flexbe_cli.stat.u_id&&this.add_fields([{name:"f_uid",type:"hidden",value:flexbe_cli.stat.u_id}],!1),!this.validation())return!1;if("function"==typeof this.o.before_send&&this.o.before_send(),"undefined"!=typeof FormData)this.send_formdata();else{if(!(this.$form.find('input[type="file"]').length<1))return!0;this.send_ajax()}return!1},this))}},add_fields:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.$form.find(".form_fields_advanced");e.length&&i[0]&&(t&&i.empty(),e.forEach(function(e){i.find('input[name="'.concat(e.name,'"]')).remove();var t=$("<input>").attr("type",e.type).attr("name",e.name).attr("value",e.value);i.append(t)}))},add_items:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e&&e.length){var t=0,i=0,n="",o=[];e=e.map(function(e){return"object"!==_typeof(e)?{}:(e.count=parseInt(e.count,10)||1,e.price=parseFloat(e.price)||0,e.title="string"==typeof e.title&&e.title.trim()||e.title||"",t+=e.price*e.count||0,i+=e.count,e)});try{n=JSON.stringify(e)}catch(e){}o.push({type:"hidden",name:"product[items]",value:n}),o.push({type:"hidden",name:"product[price]",value:t}),o.push({type:"hidden",name:"product[total]",value:i}),t&&(o.push({type:"hidden",name:"pay[price]",value:t}),o.push({type:"hidden",name:"pay[desc]",value:i>1?"Товаров в корзине: ".concat(i):e[0].title})),this.add_fields(o)}},send_formdata:function(){var e=new FormData(this.$form.get(0));e.append("is_ajax","true"),"undefined"!=typeof flexbeAPI&&void 0!==flexbeAPI.customLeadData&&e.append("customLeadData",JSON.stringify(flexbeAPI.customLeadData)),e.append("f_ab",JSON.stringify(flexbe_cli.stat.AB.getcookie())),this.$form.parent().parent().addClass("submitting");var t=$.ajax({url:this.$form.attr("action"),type:"POST",dataType:"json",processData:!1,contentType:!1,data:e,xhr:$.proxy(function(){var e=$.ajaxSettings.xhr();return e.upload,e},this)});t.done($.proxy(function(e){setTimeout($.proxy(function(){this.$form.parent().parent().addClass("submit-ok step-1"),setTimeout($.proxy(function(){this.$form.parent().parent().addClass("submit-ok step-2"),setTimeout($.proxy(function(){this.$form.parent().parent().addClass("submit-ok step-3"),setTimeout($.proxy(function(){this.$form.parent().parent().removeClass("submitting submit-ok step-1 step-2 step-3"),this.$form.get(0).reset(),e.send_formdata=!0,void 0!==e.pay&&(this.pay=e.pay),this.show_done()},this),1e3)},this),300)},this),400)},this),500),flexbe_cli.stat.AB.fixlead(e.fixed_tests)},this)),t.fail($.proxy(function(e){this.$form.parent().parent().removeClass("submitting")},this))},send_ajax:function(){var e=this.$form.serialize(),t=$.ajax({url:this.$form.attr("action"),type:"POST",dataType:"json",data:e+"&is_ajax=true"});t.done($.proxy(function(e){this.$form.get(0).reset(),e.send_ajax=!0,void 0!==e.pay&&(this.pay=e.pay),this.show_done()},this)),t.fail($.proxy(function(e){},this))},validation:function(){var e=!0;return this.$form.find("div[data-type]").each(function(t,i){var n,o,a=$(i),s=a.attr("data-type"),r=a.attr("data-is-required"),l=isNaN(1*r)?"true"==r:Boolean(1*r);a.removeClass("is_error"),n=a.find("input,textarea,select").not('[type="hidden"]'),-1!=$.inArray(s,["text","textarea","email","phone","name"])?o=$.trim(n.val()):"file"==s&&(o=n.get(0).files);try{if(l&&void 0!==o&&o.length<1)throw flexbe_cli.lang.get("form.required");if("email"==s&&"email"==n.attr("data-check")&&o.length>0){/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Zа-яёА-ЯЁ\-0-9]+\.)+[a-zA-Zа-яёА-ЯЁ]{2,}))$/.test(o)||(a.addClass("is_error"),a.find(".error").text(flexbe_cli.lang.get("form.email")),e=!1)}if("phone"==s&&"phone"==n.attr("data-check")&&o.length>0){if(/[^0-9+\(\)\-\s]/.test(o))throw flexbe_cli.lang.get("form.digits");if(o.replace(/[^0-9]/g,"").length<5)throw flexbe_cli.lang.get("form.minlength")}}catch(t){a.addClass("is_error"),a.find(".error").text(t),e=!1}}),e},show_done:function(){var e=this.$form.find('input[name="action"]').val();flexbe_cli.stat.reach_goal("order_done");try{var t=this.$form.find('input[name="goal"]').val();void 0!==t&&""!==t&&flexbe_cli.stat.reach_goal(t)}catch(e){}try{var i=this.$form.find('textarea[name="goal_html"]').val();if("string"==typeof i&&i.trim()){var n=document.write;document.write=function(e){$("body:eq(0)").append(e)},$("body:eq(0)").append('<div style="display:none">'+i+"</div>"),setTimeout(function(){document.write=n},1e4)}}catch(e){}if("pay"==e&&void 0!==this.pay&&null!==this.pay){if(this.pay.pay_link.length>0){var o=window.location.origin+window.location.pathname+(window.location.search?window.location.search+"&":"?")+"pay_id="+this.pay.pay_id+"&h="+this.pay.pay_hash;try{history.pushState(null,null,o),setTimeout(function(){flexbe_cli.events.emit("pay",{action:"init"})},200)}catch(e){setTimeout(function(){document.location=o},500)}}}else if("redirect"==e){var a=this.$form.find('input[name="action_redirect"]').val();a.length>0&&setTimeout(function(){document.location=a},500)}else{var s=this.$data.find("[data-modal-id]").attr("data-modal-id");if(!flexbe_cli.modal.find(s)){var r=String(this.o.id||this.o.block.attr("data-id")).split("_")[0];s="".concat(r,"_").concat(s)}flexbe_cli.events.emit("modal_command",{command:"open",id:s})}"function"==typeof this.o.after_send&&this.o.after_send()},set_name:function(e){this.o.name=e},send_log:function(e,t){return!1}},flexbe_cli.modal={data:{},opened:{},proto:{is:"modal",require:[],_on_init:function(e){var t=this;flexbe_cli.require(this.require,function(){t.on_load(e),t.on_init(e),t.isInit=!0,flexbe_cli.events.emit("modal_event",{event:"inited",sender:"core",core:t})})},_on_open:function(e){this.on_open(e),flexbe_cli.events.emit("modal_event",{event:"opened",sender:"core",core:this})},_on_close:function(){this.on_close(),flexbe_cli.events.emit("modal_event",{event:"closed",sender:"core",core:this})},_on_update:function(e){var t=this;flexbe_cli.require(this.require,function(){t.on_load(e),t.on_update(e),flexbe_cli.events.emit("modal_event",{event:"updated",sender:"core",core:t})})},_on_msg:function(e,t){this.on_msg(e,t)},on_load:function(){},on_open:function(){},on_close:function(){},on_init:function(){},on_update:function(){},on_msg:function(){}},init:function(){var e=this;$(".m_modal").each(function(t,i){e.bind($(i))});var t=getJsonFromUrl(location.search);if(t.service&&t.m_id)return this.open(t.m_id),!1;flexbe_cli.events.on("modal_add",function(t,i){if(i&&i.id){var n=$('.m_modal[data-id="'+i.id+'"]').last();e.bind(n,i)}}),flexbe_cli.events.on("modal_render",function(e,t){if(t&&t.id&&~t.render.indexOf("template")){var i=$('.m_modal[data-id="'+t.id+'"]').last().data("_core");void 0!==i&&"function"==typeof i._on_update&&i._on_update()}}),flexbe_cli.events.on("client_msg.modal",function(e,t){if(t&&t.id&&"modal"===t.is){var i=$('.m_modal[data-id="'+t.id+'"]').last().data("_core");void 0!==i&&i._on_msg(t.msg,t.data)}}),flexbe_cli.events.on("modal_command",function(t,i){if(i)switch(i.command){case"open":e.open(i.id,i.data);break;case"close":e.close(i.id)}}),$("body").on("click.modal-close",".m_modal .close",function(t){var i=$(t.currentTarget).closest(".m_modal").attr("data-id");e.close(i)}),$(window).on("keyup.modal-close-esc",function(t){if(27!=t.keyCode)return!0;var i=$(".m_modal.show").eq(0).attr("data-id");e.close(i)}),$("body").on("click.modal-close-overlay",function(t){if(!flexbe_cli.is_admin&&Object.keys(e.opened).length&&$(t.target).is(".m_modal")){var i=$(".m_modal.show").eq(0).attr("data-id");e.close(i)}}),flexbe_cli.is_admin||$(".m_modal").removeAttr("data-data")},bind:function(e,t){var i=e.attr("data-m-id");if(e.data("_core"))return!0;this.data[i]||this.register(i);var n=new this.data[i](e);"object"===_typeof(n)&&(e.data("_core",n),n._on_init(t),t&&"modal_slide"===t.reason&&n._on_open())},register:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e||console.log("Модал не имеет уник.номера!"),"undefined"!=typeof jQuery){flexbe_cli.modal.data[e]=function(t){this.$area=t,this.$modal=t,this.template_id=e,this.id=t.data("id"),this.type=t.data("mType")||[]};var n=$.extend(!0,{},this.proto);flexbe_cli.modal.data[e].prototype=_extends({},n,i)}else setTimeout(function(){return t.register(e,i)},20)},popstate:function(){var e=this;setTimeout(function(){if(/^#{1,2}/.test(location.hash)){var t=location.hash.replace(/^#{1,2}/,""),i=$(".modal-list").find('._anchor[name="'.concat(t,'"], .m_modal[data-id="').concat(t,'"]')).closest(".m_modal").attr("data-id");e.open(i)}else e.close()},flexbe_cli.is_admin?300:0)},find:function(e){var t=$(".m_".concat(e));return!!t.length&&t},open:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.find(e);if(n.length>1){var o=i.multivar;if(!o){var a=String(e).split("_")[0];o=$('[data-id="'.concat(a,'"]')).attr("data-multivar")}var s=[];o&&"default"!==o&&(s=n.filter('[data-multivar="'.concat(o,'"]')).eq(0)),n=s.length?s.eq(0):n.eq(0)}if(!n||!n.attr("data-m-id"))return!1;var r=n.find(".modal-data > ._anchor").attr("name");r&&(location.hash="#".concat(r));var l=n.closest(".modal-list"),c=n.data("_core");n.data("_options",i),this.opened[e]=!0,$("body").addClass("overflow"),n.siblings().removeClass("show"),n.addClass("show"),l.addClass("show"),setTimeout(function(){l.addClass("overlay"),"object"===_typeof(c)&&c._on_open(t),"function"==typeof i.on_open&&i.on_open(c)},30)},close:function(e){/^#{1,2}/.test(location.hash)&&(location.hash="##");var t=$(".modal-list");if($("body").removeClass("overflow"),e){var i=$(".m_modal.m_".concat(e)),n=i.data("_core"),o=i.data("_options")||{};i.removeClass("show"),this.opened[e]=!1,$(".m_modal").hasClass("show")||t.removeClass("show overlay"),"object"==_typeof(n)&&n._on_close(),"function"==typeof o.on_close&&o.on_close(n)}else Object.keys(this.opened).map(this.close.bind(this))}},flexbe_cli.menu=function(){this.options={menu:".menu",srollSpeed:400,topOffset:1},this.items=[],this.menu_floating=!1,this.clickInit=!1,this.block_params={},this.init=function(e,t){var i=this;if(this.$block=t,this.lang(),void 0!==e.menu&&(this.options.menu=e.menu),void 0!==e.srollSpeed&&(this.options.srollSpeed=e.srollSpeed),void 0!==e.topOffset&&(this.options.topOffset=e.topOffset),this.getItems(),!flexbe_cli.is_admin&&!flexbe_cli.run.is_mobile){this.menu_floating=!1;var n=this.$block.find('input[name="menu_floating"]').val();"true"!=n&&1!=n||(this.menu_floating=!0)}this.getBlockParams(function(e){if(i.menu_floating){var t=i.$block[0].className.replace(/[^0-9]/gim,"");$(document).off("scroll.".concat(t)).on("scroll.".concat(t),function(e){i.floating()})}else i.realeseBlock()})},this.getBlockParams=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=this,i=t.$block.height();0===i?i=t.$block.data("height")||120:t.$block.data("height",i),setTimeout(function(){t.block_params.height=i,t.block_params.top=t.$block.offset().top,e(t.block_params)},100)},this.getItems=function(){this.$block.find("".concat(this.options.menu," a")).each($.proxy(function(e,t){var i={el:$(t),type:"link",href:"",anchor:{top:0,el:!1}},n=String(i.el.attr("href")),o=n.split("#");if(a=o[1],i.href=n,""!==a&&(""===o[0]||o[0]==window.location.pathname||o[0]==window.location.href||o[0]==window.location.origin)){var a=$('a[name="'.concat(a,'"]'));a.length>0&&(i.type="anchor",i.anchor={el:a,top:a.offset().top})}this.items[n]=i},this)),this.activeItem()},this.activeItem=function(){var e=!1,t=99999999;for(var i in this.items){var n=this.items[i];if("anchor"==n.type&&this.menu_floating){var o=n.anchor.top-this.block_params.height-$(window).height()/2.5;$(window).scrollTop()>o&&t>$(window).scrollTop()-o&&(t=$(window).scrollTop()-o,e=n.el)}else"link"!=n.type||e||n.href!=window.location.href&&n.href!=window.location.pathname+window.location.search&&n.href!=window.location.origin+window.location.pathname+window.location.search||(e=n.el)}this.$block.find("".concat(this.options.menu," a")).removeClass("active"),e&&e.addClass("active")},this.floating=function(){this.menu_floating&&$(window).scrollTop()>this.block_params.top+this.options.topOffset?this.fixBlock():this.realeseBlock(),this.activeItem()},this.fixed=!1,this.fixBlock=function(){this.$block.hasClass("floating")||this.$block.addClass("floating"),this.fixed||(this.$block.css("marginBottom","".concat(this.block_params.height-30,"px")),this.fixed=!0)},this.realeseBlock=function(){this.fixed&&(this.$block.removeClass("floating").css({marginBottom:"0px"}),this.fixed=!1)},this.lang=function(){var e=flexbe_cli.lang.get("menu");this.$block.find("[data-menu-text]").text(e)}};